/*!
 * jCollections JavaScript Library v1.0
 * Copyright 2014, Dmitry Starosta
 * Released under the MIT license
 */
var _ci=function(e){"use strict";var t={},n={ABSTRACT_COLLECTION_INIT:'"Collection" is an abstract class that cannot be initialized directly',DUPLICATE_KEY:"Value with the same key already exists",INVALID_COLLECTION:"Invalid collection provided",INVALID_COUNT_VALUE:"Count must be a positive integer",INVALID_INDEX:"Index must be a non-negative integer",INVALID_KEY_SELECTOR:"Invalid key selector function provided",INVALID_KEY_VALUE_COLLECTION:"The initial item collection can only contain key/value objects",INVALID_RESULT_SELECTOR:"Invalid result selector function provided",INVALID_VALUE_ARRAY:"Invalid array of values provided",UNCOMPARABLE_OBJECT:"Object(s) cannot be compared using a built-in comparer",RESERVED_PROPERTY_NAME:'Reserved property name "%s"',UNDEFINED_KEY:"Key must be defined",UNDEFINED_VALUE:"Value must be defined",UNINITIALIZED_CLASS:'The keyword "this" is not defined. Did you forget the "new" operator?'},r=function(e){return!Array.isArray(e)&&e-parseFloat(e)+1>=0},i=function(e){return!!e&&Object.prototype.toString.call(e)==="[object Function]"},s=function(e){if(!e||e.length===0){return[]}if(e.length===1){var n=e[0];if(Array.isArray(n)){return n.slice(0)}else if(n instanceof t.Collection){return n.toArray()}else{return[n]}}else{return Array.prototype.slice.call(e,0)}},o=function(e){if(!e){return}delete e.__inner.items;e.__inner.items=[];e.length=0},u=function(r){if(r!==e&&r!==null){if(Array.isArray(r)){return r.slice(0)}else if(r instanceof t.Collection){return r.toArray()}}throw new TypeError(n.INVALID_COLLECTION)},a=function(e,t,n){var r=-1,i=t.length,s;for(s=0;s<i;s++){if(n(e,t[s])){r=s;break}}return r},f=function(e){if(!e){return e}var t;for(t=1;t<arguments.length;t++){e=e.replace(/%s/,arguments[t])}return e};t.Comparer={standard:function(t,i){if(t===i){return 0}if(t===e||t===null||r(t)&&r(i)&&t<i){return-1}if(i===e||i===null||r(t)&&r(i)&&i<t){return 1}var s="[object Object]",o=t.toString(),u=i.toString();if(o===s||u===s){throw new TypeError(n.UNCOMPARABLE_OBJECT)}return o.localeCompare(u)},reverse:function(t,i){if(t===i){return 0}if(t===e||t===null||r(t)&&r(i)&&t<i){return 1}if(i===e||i===null||r(t)&&r(i)&&i<t){return-1}var s="[object Object]",o=t.toString(),u=i.toString();if(o===s||u===s){throw new TypeError(n.UNCOMPARABLE_OBJECT)}return u.localeCompare(o)}};t.EqualityComparer={standard:function(e,t){return e===t},caseInsensitive:function(e,t){if(typeof e!=="string"||typeof t!=="string"){return e===t}else{return e.toLocaleUpperCase()===t.toLocaleUpperCase()}}};t.KeyValue=function(t,r){if(t===e||t===null){throw new Error(n.UNDEFINED_KEY)}if(r===e){throw new Error(n.UNDEFINED_VALUE)}this.key=t;this.value=r};t.KeyValue.prototype.toString=function(){return this.key.toString()+":"+(this.value!==null?this.value.toString():"")};t.Collection=function(){if(this===e){throw new TypeError(n.UNINITIALIZED_CLASS)}if(_ci&&this.constructor.name==="Collection"){throw new TypeError(n.ABSTRACT_COLLECTION_INIT)}this.__inner={};this.length=0};t.Collection.prototype.size=function(){return this.__inner.items.length};t.Collection.prototype.isEmpty=function(){return this.size()===0};t.Collection.prototype.forEach=function(e){if(this.isEmpty()||!i(e)){return}var t=this.toArray(),n;for(n=0;n<t.length;n++){e.call(t[n],n)}};t.Collection.prototype.find=function(t){if(this.isEmpty()||!i(t)){return e}var n=this.toArray(),r,s;for(r=0;r<n.length;r++){s=n[r];if(t.call(s)){return s}}return e};t.Collection.prototype.findAll=function(e){if(this.isEmpty()||!i(e)){return[]}var t=this.toArray(),n=[],r,s;for(r=0;r<t.length;r++){s=t[r];if(e.call(s)){n.push(s)}}return n};t.Collection.prototype.groupBy=function(r,s){var o=new t.Dictionary,u,a,f,l,c,h;if(typeof r==="string"&&r.length>0){u=function(){return this[r]}}else if(i(r)){u=r}else{throw new Error(n.INVALID_KEY_SELECTOR)}if(s&&typeof s==="string"){s=[s]}this.forEach(function(){a=u.call(this);if(a===e){a=null}f=o.get(a);if(!Array.isArray(s)||s.length===0){if(!f){f=[]}if(f.indexOf(this)<0){f.push(this)}}else{if(!f){f={}}for(h=0;h<s.length;h++){l=s[h];if(!l||typeof l!=="string"){continue}if(!f.hasOwnProperty(l)){f[l]=[]}if(this.hasOwnProperty(l)){c=this[l];if(c!==e&&f[l].indexOf(c)<0){f[l].push(c)}}}}o.put(a,f)});return o};t.Collection.prototype.all=function(e){return this.findAll(e).length===this.size()};t.Collection.prototype.any=function(t){return this.find(t)!==e};t.Collection.prototype.map=function(e){if(this.isEmpty()){return[]}var t=i(e),n=e&&typeof e==="string",r=this.toArray(),s=[],o,u;if(!t&&!n){return[]}for(u=0;u<r.length;u++){o=t?e.call(r[u]):r[u][e];s.push(o)}return s};t.Collection.prototype.reduce=function(t,n,r){if(this.isEmpty()||!i(t)){return e}var s=this.toArray(),o;if(r===true||n===true&&r===e){for(o=s.length-1;o>=0;o--){n=t.call(s[o],n)}}else{for(o=0;o<s.length;o++){n=t.call(s[o],n)}}return n};t.Collection.prototype.toArray=function(){return this.__inner.items.slice(0)};t.Collection.prototype.toSortedArray=function(e){var t=this.toArray();t.sort(e);return t};t.Collection.prototype.toJSON=function(){return JSON.stringify(this.toArray())};t.Collection.prototype.toString=function(){return this.toArray().join(",")};t.Collection.avg=function(n){var r=u(n);if(r.length===0){return e}return t.Collection.sum(r)/r.length};t.Collection.concat=function(){if(arguments.length===0){return e}var t=[],n=[],r;for(r=0;r<arguments.length;r++){n.push(u(arguments[r]))}return t.concat.apply(t,n)};t.Collection.distinct=function(e,n){var r=u(e);if(r.length===0){return[]}if(i(n)){return(new t.Set(n,r)).toArray()}return(new t.Set(r)).toArray()};t.Collection.equivalent=function(e,n,r){var s=u(e),o=u(n),a;if(s.length!==o.length){return false}if(!i(r)){r=t.EqualityComparer.standard}for(a=0;a<s.length;a++){if(!r(s[a],o[a])){return false}}return true};t.Collection.first=function(t){var n=u(t);if(n.length===0){return e}return n[0]};t.Collection.flatten=function(e,n){var r=u(e),i=[],s=true,o,a,f;if(r.length===0){return[]}for(f=0;f<r.length;f++){a=r[f];if(a instanceof t.Collection){r[f]=a.toArray()}}o=i.concat.apply(i,r);if(n){o.forEach(function(e){if(Array.isArray(e)||e instanceof t.Collection){s=false}});if(!s){o=t.Collection.flatten(o,true)}}return o};t.Collection.get=function(e,t){if(t!==parseInt(t,10)||t<0){throw new Error(n.INVALID_INDEX)}return u(e)[t]};t.Collection.last=function(t){var n=u(t);if(n.length===0){return e}return n[n.length-1]};t.Collection.min=function(t){var n=u(t);if(n.length===0){return e}return Math.min.apply(Math,n)};t.Collection.max=function(t){var n=u(t);if(n.length===0){return e}return Math.max.apply(Math,n)};t.Collection.range=function(e,t,n){return u(e).slice(t,n)};t.Collection.size=function(r){if(r!==e&&r!==null){if(Array.isArray(r)){return r.length}else if(r instanceof t.Collection){return r.size()}}throw new TypeError(n.INVALID_COLLECTION)};t.Collection.sum=function(t){var n=u(t);if(n.length===0){return e}return n.reduce(function(e,t){return e+t})/1};t.Collection.toArray=function(n){if(n===e){return e}if(Array.isArray(n)){return n.slice(0)}if(n instanceof t.Collection){return n.toArray()}return[n]};t.Collection.toSortedArray=function(n,r){if(n===e){return e}var i=t.Collection.toArray(n);i.sort(r);return i};t.Collection.zip=function(e,t,n){if(!i(n)){n=function(e,t){return[e,t]}}var r=u(e),s=u(t),o=[],a;for(a=0;a<r.length;a++){o.push(n(r[a],s.length>a?s[a]:null))}return o};t.List=function(){t.Collection.prototype.constructor.apply(this,arguments);this.__inner.items=s(arguments);this.length=this.__inner.items.length};t.List.prototype=new t.Collection;t.List.prototype.constructor=t.List;t.List.prototype.findIndex=function(e){return this.__inner.items.indexOf(e)};t.List.prototype.findLastIndex=function(e){return this.__inner.items.lastIndexOf(e)};t.List.prototype.get=function(t){if(t!==parseInt(t,10)||t<0){throw new Error(n.INVALID_INDEX)}var r=this.size();if(r===0||t>r-1){return e}return this.__inner.items[t]};t.List.prototype.contains=function(e){return this.__inner.items.indexOf(e)>=0};t.List.prototype.add=function(e){this.__inner.items.push(e);this.length=this.__inner.items.length};t.List.prototype.addRange=function(){var e=s(arguments),t;for(t=0;t<e.length;t++){this.add(e[t])}};t.List.prototype.insert=function(e,t){this.__inner.items.splice(e,0,t);this.length=this.__inner.items.length};t.List.prototype.moveTo=function(e,t){if(!this.remove(t)){return false}this.__inner.items.splice(e,0,t);this.length++;return true};t.List.prototype.remove=function(e){var t=this.findIndex(e),n;if(t<0){return false}for(n=this.__inner.items.length-1;n>=0;n--){if(this.__inner.items[n]===e){this.__inner.items.splice(n,1)}}this.length=this.__inner.items.length;return true};t.List.prototype.removeAt=function(e){var t=this.__inner.items.length;this.__inner.items.splice(e,1);this.length=this.__inner.items.length;return t>this.length};t.List.prototype.removeWhere=function(e){if(this.isEmpty()||!i(e)){return false}var t=this.__inner.items.length,n;for(n=t-1;n>=0;n--){if(e.call(this.__inner.items[n],n)){this.__inner.items.splice(n,1)}}this.length=this.__inner.items.length;return t>this.length};t.List.prototype.reverse=function(){this.__inner.items.reverse();return this};t.List.prototype.clear=function(){if(this.isEmpty()){return}o(this)};t.List.parse=function(e){if(!Array.isArray(e)){throw new Error(n.INVALID_VALUE_ARRAY)}return new t.List(e)};t.LinkedList=function(){t.Collection.prototype.constructor.apply(this,arguments);this.head=null;this.tail=null;this.length=0;var n=s(arguments),r;for(r=0;r<n.length;r++){this.addLast(n[r])}};t.LinkedList.prototype=new t.Collection;t.LinkedList.prototype.constructor=t.LinkedList;t.LinkedList.Node=function(t){if(t===e){throw new Error(n.UNDEFINED_VALUE)}this.value=t;this.prev=null;this.next=null};t.LinkedList.prototype.size=function(){var e=0,t=this.head;while(t){e++;t=t.next}return e};t.LinkedList.prototype.contains=function(e){var t=this.head;while(t){if(t.value===e){return true}t=t.next}return false};t.LinkedList.prototype.findIndex=function(e){var t=0,n=this.head;while(n){if(n.value===e){return t}t++;n=n.next}return-1};t.LinkedList.prototype.findLastIndex=function(e){var t=this.length-1,n=t<=1?this.head:this.tail;while(n&&t>=0){if(n.value===e){return t}t--;n=n.prev}return-1};t.LinkedList.prototype.get=function(t){if(t!==parseInt(t,10)||t<0){throw new Error(n.INVALID_INDEX)}var r=0,i=this.head;while(i&&r<=t){if(r===t){return i.value}r++;i=i.next}return e};t.LinkedList.prototype.addFirst=function(r){if(r===e){throw new Error(n.UNDEFINED_VALUE)}var i=new t.LinkedList.Node(r),s;if(!this.head){this.head=i}else{s=this.head;this.head=i;this.head.next=s;s.prev=this.head;if(!this.tail){this.tail=s;this.tail.next=null}}this.length++};t.LinkedList.prototype.addLast=function(r){if(r===e){throw new Error(n.UNDEFINED_VALUE)}var i=new t.LinkedList.Node(r),s;if(!this.head){this.head=i}else if(!this.tail){this.tail=i;this.tail.prev=this.head;this.head.next=this.tail}else{s=this.tail;this.tail=i;this.tail.prev=s;s.next=this.tail}this.length++};t.LinkedList.prototype.removeFirst=function(){if(!this.head){return false}this.head=this.head.next;if(this.tail===this.head){this.tail=null}this.length--;return true};t.LinkedList.prototype.removeLast=function(){if(!this.head&&!this.tail){return false}if(!this.tail){this.head=null}else if(this.tail.prev&&this.tail.prev!==this.head){this.tail.prev.next=null;this.tail=this.tail.prev}else{this.head.next=null;this.tail=null}this.length--;return true};t.LinkedList.prototype.remove=function(t){if(t===e){throw new Error(n.UNDEFINED_VALUE)}if(!this.head){return false}var r=this.length,i=this.head;while(i){if(i.value===t){if(!i.prev){this.head=i.next;if(this.head){this.head.prev=null;if(this.head===this.tail){this.tail=null}}}else if(!i.next){this.tail=i.prev;if(this.tail){this.tail.next=null;if(this.head===this.tail){this.tail=null}}}else{i.next.prev=i.prev;i.prev.next=i.next}this.length--}i=i.next}return this.length<r};t.LinkedList.prototype.clear=function(){this.head=null;this.tail=null;this.length=0};t.LinkedList.prototype.toArray=function(){var e=[],t=this.head;while(t){e.push(t.value);t=t.next}return e};t.LinkedList.prototype.toReverseArray=function(){var e=[],t=this.tail||this.head;while(t){e.push(t.value);t=t.prev}return e};t.LinkedList.parse=function(e){if(!Array.isArray(e)){throw new Error(n.INVALID_VALUE_ARRAY)}return new t.LinkedList(e)};t.Set=function(){t.Collection.prototype.constructor.apply(this,arguments);var n=s(arguments),r;if(arguments.length>0&&i(n[0])){this.__inner.equalityComparer=n[0];n.splice(0,1);n=s(n)}else{this.__inner.equalityComparer=t.EqualityComparer.standard}this.__inner.items=[];for(r=0;r<n.length;r++){this.add(n[r])}};t.Set.prototype=new t.Collection;t.Set.prototype.constructor=t.Set;t.Set.prototype.getEqualityComparer=function(){return this.__inner.equalityComparer};t.Set.prototype.contains=function(e){return a(e,this.__inner.items,this.__inner.equalityComparer)>=0};t.Set.prototype.add=function(e){if(this.contains(e)){return false}this.__inner.items.push(e);this.length=this.__inner.items.length;return true};t.Set.prototype.addRange=function(){var e=s(arguments),t;for(t=0;t<e.length;t++){this.add(e[t])}};t.Set.prototype.remove=function(e){var t=a(e,this.__inner.items,this.__inner.equalityComparer);if(t<0){return false}this.__inner.items.splice(t,1);this.length=this.__inner.items.length;return true};t.Set.prototype.clear=function(){if(this.isEmpty()){return}o(this)};t.Set.prototype.union=function(e){var n=new t.Set(this.__inner.equalityComparer,this.__inner.items);n.addRange(e);return n};t.Set.prototype.intersection=function(e){var n=new t.Set(this.__inner.equalityComparer),r=s(arguments),i,o;for(o=0;o<r.length;o++){i=r[o];if(this.contains(i)){n.add(i)}}return n};t.Set.prototype.difference=function(e){var n=new t.Set(this.__inner.equalityComparer),r=s(arguments),i,o,u,a,f;for(a=0;a<this.__inner.items.length;a++){i=this.__inner.items[a];u=false;for(f=0;f<r.length;f++){o=r[f];if(this.__inner.equalityComparer(i,o)){u=true;break}}if(!u){n.add(i)}}return n};t.Set.prototype.equals=function(e){var t=s(arguments),n;if(t.length!==this.__inner.items.length){return false}for(n=0;n<this.__inner.items.length;n++){if(!this.__inner.equalityComparer(t[n],this.__inner.items[n])){return false}}return true};t.Set.prototype.isProperSubsetOf=function(e){var n=new t.Set(this.__inner.equalityComparer,s(arguments));return this.difference(n).length===0&&!this.equals(n)};t.Set.prototype.isProperSupersetOf=function(e){var n=new t.Set(this.__inner.equalityComparer,s(arguments));return n.difference(this).length===0&&!this.equals(n)};t.Set.prototype.isSubsetOf=function(e){var n=new t.Set(this.__inner.equalityComparer,s(arguments));return this.difference(n).length===0};t.Set.prototype.isSupersetOf=function(e){var n=new t.Set(this.__inner.equalityComparer,s(arguments));return n.difference(this).length===0};t.Set.parse=function(e){if(!Array.isArray(e)){throw new Error(n.INVALID_VALUE_ARRAY)}return new t.Set(e)};t.Bag=function(){t.Collection.prototype.constructor.apply(this,arguments);var n=s(arguments),r;if(arguments.length>0&&i(n[0])){this.__inner.equalityComparer=n[0];n.splice(0,1);n=s(n)}else{this.__inner.equalityComparer=t.EqualityComparer.standard}this.__inner.values=[];this.__inner.counts=[];for(r=0;r<n.length;r++){this.add(n[r])}};t.Bag.prototype=new t.Collection;t.Bag.prototype.constructor=t.Bag;t.Bag.prototype.getEqualityComparer=function(){return this.__inner.equalityComparer};t.Bag.prototype.size=function(){var e=0,t=this.__inner.counts.length,n;for(n=0;n<t;n++){e+=this.__inner.counts[n]}return e};t.Bag.prototype.distinctSize=function(){return this.__inner.values.length};t.Bag.prototype.contains=function(e){return a(e,this.__inner.values,this.__inner.equalityComparer)>=0};t.Bag.prototype.count=function(t){if(t===e){throw new Error(n.UNDEFINED_VALUE)}var r=a(t,this.__inner.values,this.__inner.equalityComparer);if(r<0){return 0}return this.__inner.counts[r]};t.Bag.prototype.add=function(t,r){var i=a(t,this.__inner.values,this.__inner.equalityComparer);if(r===e){r=1}if(r!==parseInt(r,10)||r<1){throw new Error(n.INVALID_COUNT_VALUE)}if(i>=0){this.__inner.counts[i]+=r}else{this.__inner.values.push(t);this.__inner.counts.push(r)}this.length=this.size()};t.Bag.prototype.setCount=function(t,r){var i=a(t,this.__inner.values,this.__inner.equalityComparer);if(r===e||r===null||r!==parseInt(r,10)||r<1){throw new Error(n.INVALID_COUNT_VALUE)}if(i>=0){this.__inner.counts[i]=r}else{this.__inner.values.push(t);this.__inner.counts.push(r)}this.length=this.size()};t.Bag.prototype.remove=function(e){var t=a(e,this.__inner.values,this.__inner.equalityComparer);if(t<0){return false}this.__inner.values.splice(t,1);this.__inner.counts.splice(t,1);this.length=this.size();return true};t.Bag.prototype.toArray=function(){var e=[],t,n,r,i;for(r=0;r<this.__inner.values.length;r++){t=this.__inner.values[r];n=this.__inner.counts[r];for(i=0;i<n;i++){e.push(t)}}return e};t.Bag.prototype.toDistinctArray=function(){return this.__inner.values.slice(0)};t.Bag.prototype.toString=function(){var e="",t,n,r,i;for(r=0;r<this.__inner.values.length;r++){t=this.__inner.values[r];n=this.__inner.counts[r];for(i=0;i<n;i++){if(e.length>0){e+=","}e+=t}}return e};t.Bag.prototype.clear=function(){if(this.isEmpty()){return}delete this.__inner.values;delete this.__inner.counts;this.__inner.values=[];this.__inner.counts=[];this.length=0};t.Bag.parse=function(e){if(!Array.isArray(e)){throw new Error(n.INVALID_VALUE_ARRAY)}return new t.Bag(e)};t.Dictionary=function(){t.Collection.prototype.constructor.apply(this,arguments);var r=s(arguments),o=this,u,f;if(r.length>0&&i(r[0])){this.__inner.equalityComparer=r[0];r.splice(0,1);r=s(r)}else{this.__inner.equalityComparer=t.EqualityComparer.standard}this.__inner.keys=[];this.__inner.values=[];this.__inner.findIndex=function(e){return a(e,o.__inner.keys,o.__inner.equalityComparer)};for(f=0;f<r.length;f++){u=r[f];if(!u||!u.hasOwnProperty("key")||!u.hasOwnProperty("value")){throw new Error(n.INVALID_KEY_VALUE_COLLECTION)}this.add(u.key,u.value)}};t.Dictionary.prototype=new t.Collection;t.Dictionary.prototype.constructor=t.Dictionary;t.Dictionary.prototype.getEqualityComparer=function(){return this.__inner.equalityComparer};t.Dictionary.prototype.size=function(){return this.__inner.keys.length};t.Dictionary.prototype.containsKey=function(e){return this.__inner.findIndex(e)>=0};t.Dictionary.prototype.get=function(t){if(t===e||t===null){throw new Error(n.UNDEFINED_KEY)}var r=this.__inner.findIndex(t);if(r<0){return e}return this.__inner.values[r]};t.Dictionary.prototype.add=function(t,r){if(t===e||t===null){throw new Error(n.UNDEFINED_KEY)}if(r===e){throw new Error(n.UNDEFINED_VALUE)}if(this.__inner.findIndex(t)>=0){throw new Error(n.DUPLICATE_KEY)}this.__inner.keys.push(t);this.__inner.values.push(r);this.length=this.__inner.keys.length};t.Dictionary.prototype.put=function(t,r){if(t===e||t===null){throw new Error(n.UNDEFINED_KEY)}if(r===e){throw new Error(n.UNDEFINED_VALUE)}var i=this.__inner.findIndex(t);if(i>=0){this.__inner.values[i]=r;return}this.__inner.keys.push(t);this.__inner.values.push(r);this.length=this.__inner.keys.length};t.Dictionary.prototype.remove=function(t){if(t===e||t===null){throw new Error(n.UNDEFINED_KEY)}var r=this.__inner.findIndex(t);if(r<0){return false}this.__inner.keys.splice(r,1);this.__inner.values.splice(r,1);this.length=this.__inner.keys.length;return true};t.Dictionary.prototype.keys=function(){return this.__inner.keys.slice(0)};t.Dictionary.prototype.values=function(){var e=[],t,n;for(n=0;n<this.__inner.values.length;n++){t=this.__inner.values[n];if(e.indexOf(t)<0){e.push(t)}}return e};t.Dictionary.prototype.toArray=function(){var e=[],n;for(n=0;n<this.__inner.keys.length;n++){e.push(new t.KeyValue(this.__inner.keys[n],this.__inner.values[n]))}return e};t.Dictionary.prototype.toSortedArray=function(e){var n=[],r=this.keys(),i,s;r.sort(e);for(s=0;s<r.length;s++){i=r[s];n.push(new t.KeyValue(i,this.__inner.values[this.__inner.keys.indexOf(i)]))}return n};t.Dictionary.prototype.toObject=function(){var e={},t,r;for(r=0;r<this.__inner.keys.length;r++){t=this.__inner.keys[r].toString();if(t.toLocaleLowerCase()!=="constructor"&&t.toLocaleLowerCase()!=="prototype"){e[t]=this.__inner.values[r]}else{throw new Error(f(n.RESERVED_PROPERTY_NAME,t))}}return e};t.Dictionary.prototype.toString=function(){var e="",t,n,r;for(r=0;r<this.__inner.keys.length;r++){if(e.length>0){e+=","}t=this.__inner.keys[r];n=this.__inner.values[r];e+=t.toString()+":"+(n!==null?n.toString():"")}return e};t.Dictionary.prototype.clear=function(){if(this.isEmpty()){return}delete this.__inner.keys;delete this.__inner.values;this.__inner.keys=[];this.__inner.values=[];this.length=0};t.Dictionary.parse=function(e){if(!Array.isArray(e)){throw new Error(n.INVALID_VALUE_ARRAY)}return new t.Dictionary(e)};t.Hashtable=function(){t.Collection.prototype.constructor.apply(this,arguments);var u=s(arguments),a=this,f,l;if(u.length>0&&i(u[0])){this.__inner.hashCodeGenerator=u[0];u.splice(0,1);u=s(u)}else{this.__inner.hashCodeGenerator=function(t){if(t===e){return"$undefined"}if(t===null){return"$null"}if(typeof t==="string"){return t}if(r(t)){return"$"+t.toString()}return JSON.stringify(t)}}this.__inner.hash={};for(l=0;l<u.length;l++){f=u[l];if(!f||!f.hasOwnProperty("key")||!f.hasOwnProperty("value")){throw new Error(n.INVALID_KEY_VALUE_COLLECTION)}this.add(f.key,f.value)}};t.Hashtable.prototype=new t.Collection;t.Hashtable.prototype.constructor=t.Hashtable;t.Hashtable.prototype.size=function(){return Object.keys(this.__inner.hash).length};t.Hashtable.prototype.containsKey=function(e){var t=this.__inner.hashCodeGenerator(e),n=this.__inner.hash[t],r,i;if(Array.isArray(n)){for(i=0;i<n.length;i++){r=n[i];if(r.key===e){return true}}}return false};t.Hashtable.prototype.get=function(t){if(t===e||t===null){throw new Error(n.UNDEFINED_KEY)}var r=this.__inner.hashCodeGenerator(t),i=this.__inner.hash[r],s,o;if(Array.isArray(i)){for(o=0;o<i.length;o++){s=i[o];if(s.key===t){return s.value}}}return e};t.Hashtable.prototype.getHashCode=function(e){return this.__inner.hashCodeGenerator(e)};t.Hashtable.prototype.add=function(r,i){if(r===e||r===null){throw new Error(n.UNDEFINED_KEY)}if(i===e){throw new Error(n.UNDEFINED_VALUE)}var s=this.__inner.hashCodeGenerator(r),o=this.__inner.hash[s],u;if(Array.isArray(o)){for(u=0;u<o.length;u++){if(o[u].key===r){throw new Error(n.DUPLICATE_KEY)}}}else{o=[]}o.push(new t.KeyValue(r,i));this.__inner.hash[s]=o;this.length++};t.Hashtable.prototype.put=function(r,i){if(r===e||r===null){throw new Error(n.UNDEFINED_KEY)}if(i===e){throw new Error(n.UNDEFINED_VALUE)}var s=this.__inner.hashCodeGenerator(r),o=this.__inner.hash[s],u;if(Array.isArray(o)){for(u=0;u<o.length;u++){if(o[u].key===r){return}}}else{o=[]}o.push(new t.KeyValue(r,i));this.__inner.hash[s]=o;this.length++};t.Hashtable.prototype.remove=function(t){if(t===e||t===null){throw new Error(n.UNDEFINED_KEY)}var r=this.__inner.hashCodeGenerator(t),i=-1,s=this.__inner.hash[r],o;if(!Array.isArray(s)){return false}for(o=0;o<s.length;o++){if(s[o].key===t){i=o;break}}if(i>=0){s.splice(i,1);if(s.length===0){delete this.__inner.hash[r]}}this.length--;return true};t.Hashtable.prototype.clear=function(){this.__inner.hash={};this.length=0};t.Hashtable.prototype.keys=function(){var e=[],t=this.toArray(),n;for(n=0;n<t.length;n++){e.push(t[n].key)}return e};t.Hashtable.prototype.values=function(){var e=[],t=this.toArray(),n,r;for(r=0;r<t.length;r++){n=t[r].value;if(e.indexOf(n)<0){e.push(n)}}return e};t.Hashtable.prototype.toArray=function(){var e=[],n,r,i,s;for(i in this.__inner.hash){if(this.__inner.hash.hasOwnProperty(i)){n=this.__inner.hash[i];for(s=0;s<n.length;s++){r=n[s];e.push(new t.KeyValue(r.key,r.value))}}}return e};t.Hashtable.prototype.toSortedArray=function(e){var n=[],r=this.keys(),i,s;r.sort(e);for(s=0;s<r.length;s++){i=r[s];n.push(new t.KeyValue(i,this.get(i)))}return n};t.Hashtable.prototype.toObject=function(){var e={},t=this.toArray(),r,i;for(i=0;i<t.length;i++){r=t[i];if(r.key.toLocaleLowerCase()!=="constructor"&&r.key.toLocaleLowerCase()!=="prototype"){e[r.key]=r.value}else{throw new Error(f(n.RESERVED_PROPERTY_NAME,r.key))}}return e};t.Hashtable.prototype.toString=function(){var e="",t=this.toArray(),n,r;for(r=0;r<t.length;r++){n=t[r];if(e.length>0){e+=","}e+=n.key.toString()+":"+(n.value!==null?n.value.toString():"")}return e};t.Hashtable.parse=function(e){if(!Array.isArray(e)){throw new Error(n.INVALID_VALUE_ARRAY)}return new t.Hashtable(e)};t.Stack=function(){t.Collection.prototype.constructor.apply(this,arguments);var n=s(arguments);n.reverse();this.__inner.items=n;this.length=this.__inner.items.length};t.Stack.prototype=new t.Collection;t.Stack.prototype.constructor=t.Stack;t.Stack.prototype.push=function(e){this.__inner.items.push(e);this.length=this.__inner.items.length};t.Stack.prototype.pop=function(){if(this.isEmpty()){return e}var t=this.__inner.items.pop();this.length=this.__inner.items.length;return t};t.Stack.prototype.peek=function(){var t=this.size();if(t===0){return e}return this.__inner.items[t-1]};t.Stack.prototype.clear=function(){if(this.isEmpty()){return}o(this)};t.Stack.prototype.toArray=function(){var e=this.__inner.items.slice(0);e.reverse();return e};t.Stack.parse=function(e){if(!Array.isArray(e)){throw new Error(n.INVALID_VALUE_ARRAY)}return new t.Stack(e)};t.Queue=function(){t.Collection.prototype.constructor.apply(this,arguments);this.__inner.items=s(arguments);this.length=this.__inner.items.length};t.Queue.prototype=new t.Collection;t.Queue.prototype.constructor=t.Queue;t.Queue.prototype.enqueue=function(e){this.__inner.items.push(e);this.length=this.__inner.items.length};t.Queue.prototype.dequeue=function(){if(this.isEmpty()){return e}var t=this.__inner.items.shift();this.length=this.__inner.items.length;return t};t.Queue.prototype.peek=function(){if(this.isEmpty()){return e}return this.__inner.items[0]};t.Queue.prototype.clear=function(){if(this.isEmpty()){return}o(this)};t.Queue.parse=function(e){if(!Array.isArray(e)){throw new Error(n.INVALID_VALUE_ARRAY)}return new t.Queue(e)};t.Tree=function(){t.Collection.prototype.constructor.apply(this,arguments);var n=s(arguments),r;if(arguments.length>0&&i(n[0])){this.__inner.comparer=n[0];n.splice(0,1);n=s(n)}else{this.__inner.comparer=t.Comparer.standard}this.root=null;for(r=0;r<n.length;r++){this.add(n[r])}};t.Tree.prototype=new t.Collection;t.Tree.prototype.constructor=t.Tree;t.Tree.prototype.getComparer=function(){return this.__inner.comparer};t.Tree.Node=function(e){this.value=e;this.left=null;this.right=null;this.parent=null};t.Tree.prototype.isEmpty=function(){return!this.root};t.Tree.prototype.size=function(){var e=0;this.forEach(function(){e++});return e};t.Tree.prototype.min=function(){var t=this.root;if(!t){return e}while(t.left){t=t.left}return t.value};t.Tree.prototype.max=function(){var t=this.root;if(!t){return e}while(t.right){t=t.right}return t.value};t.Tree.prototype.forEach=function(e){if(this.isEmpty()||!i(e)){return}var t=function(e,n){if(e===null){return}t(e.left,n);n.call(e.value);t(e.right,n)};t(this.root,e)};t.Tree.prototype.contains=function(e){var t=this,n=false;this.forEach(function(){if(!n&&t.__inner.comparer(this,e)===0){n=true}});return n};t.Tree.prototype.add=function(r){if(r===e){throw new Error(n.UNDEFINED_VALUE)}var i=this,s=function(e){var t=null,n=i.root,r=null;while(n!==null){r=i.__inner.comparer(e.value,n.value);if(r===0){return null}else if(r<0){t=n;n=n.left}else{t=n;n=n.right}}e.parent=t;if(t===null){i.root=e}else if(i.__inner.comparer(e.value,t.value)<0){t.left=e}else{t.right=e}return e};if(s(new t.Tree.Node(r))===null){return false}this.length++;return true};t.Tree.prototype.addRange=function(){var e=s(arguments),t;for(t=0;t<e.length;t++){this.add(e[t])}};t.Tree.prototype.remove=function(t){if(t===e){throw new Error(n.UNDEFINED_VALUE)}var r=this,i=function(e,t){var n;while(e!==null&&n!==0){n=r.__inner.comparer(t,e.value);if(n<0){e=e.left}else if(n>0){e=e.right}}return e},s=i(this.root,t),o=function(e){var t=function(e,t){if(e.parent===null){r.root=t}else if(e===e.parent.left){e.parent.left=t}else{e.parent.right=t}if(t!==null){t.parent=e.parent}},n;if(e.left===null){t(e,e.right)}else if(e.right===null){t(e,e.left)}else{n=e.right;while(n.left!==null){n=n.left}if(n.parent!==e){t(n,n.right);n.right=e.right;n.right.parent=n}t(e,n);n.left=e.left;n.left.parent=n}return e};if(s===null){return false}o(s);this.length--;return true};t.Tree.prototype.clear=function(){this.root=null;this.length=0};t.Tree.prototype.toArray=function(){var e=[];this.forEach(function(){e.push(this)});return e};t.Tree.prototype.toSortedArray=function(e){var t=this.toArray();if(i(e)){t.sort(e)}return t};t.Tree.parse=function(e){if(!Array.isArray(e)){throw new Error(n.INVALID_VALUE_ARRAY)}return new t.Tree(e)};var l=function(){if(_ci){return false}window.Comparer=t.Comparer;window.EqualityComparer=t.EqualityComparer;window.Bag=t.Bag;window.Collection=t.Collection;window.Dictionary=t.Dictionary;window.Hashtable=t.Hashtable;window.LinkedList=t.LinkedList;window.List=t.List;window.Queue=t.Queue;window.Set=t.Set;window.Stack=t.Stack;window.Tree=t.Tree;return true};return l()}()
/*!
 * jCollections JavaScript Library v1.0
 * Copyright 2014, Dmitry Starosta
 * Released under the MIT license
 */
(function(e,t){"use strict";var n={},r={ABSTRACT_COLLECTION_INIT:'"Collection" is an abstract class that cannot be initialized directly',DUPLICATE_KEY:"Value with the same key already exists",INVALID_COLLECTION:"Invalid collection provided",INVALID_COUNT_VALUE:"Count must be a positive integer",INVALID_INDEX:"Index must be a non-negative integer",INVALID_KEY_SELECTOR:"Invalid key selector function provided",INVALID_KEY_VALUE_COLLECTION:"The initial item collection can only contain key/value objects",INVALID_RESULT_SELECTOR:"Invalid result selector function provided",INVALID_ITEM_ARRAY:"Invalid array of items provided",UNCOMPARABLE_OBJECT:"Object(s) cannot be compared using a built-in comparer",RESERVED_PROPERTY_NAME:'Reserved property name "%s"',UNDEFINED_ITEM:"Item must be defined",UNDEFINED_KEY:"Key must be defined",UNDEFINED_VALUE:"Value must be defined",UNINITIALIZED_CLASS:'The keyword "this" is not defined. Did you forget the "new" operator?'},i=function(e){return!Array.isArray(e)&&e-parseFloat(e)+1>=0},s=function(e){return!!e&&Object.prototype.toString.call(e)==="[object Function]"},o=function(e){if(!e||e.length===0){return[]}if(e.length===1){var t=e[0];if(Array.isArray(t)){return t.slice(0)}else if(t instanceof n.Collection){return t.toArray()}else{return[t]}}else{return Array.prototype.slice.call(e,0)}},u=function(e){if(!e){return}delete e.__inner.items;e.__inner.items=[];e.length=0},a=function(e){if(e!==t&&e!==null){if(Array.isArray(e)){return e.slice(0)}else if(e instanceof n.Collection){return e.toArray()}}throw new TypeError(r.INVALID_COLLECTION)},f=function(e,t,n){var r=-1,i=t.length,s;for(s=0;s<i;s++){if(n(e,t[s])){r=s;break}}return r},l=function(e){if(!e){return e}var t;for(t=1;t<arguments.length;t++){e=e.replace(/%s/,arguments[t])}return e};n.Comparer={standard:function(e,n){if(e===n){return 0}if(e===t||e===null||i(e)&&i(n)&&e<n){return-1}if(n===t||n===null||i(e)&&i(n)&&n<e){return 1}var s="[object Object]",o=e.toString(),u=n.toString();if(o===s||u===s){throw new TypeError(r.UNCOMPARABLE_OBJECT)}return o.localeCompare(u)},reverse:function(e,n){if(e===n){return 0}if(e===t||e===null||i(e)&&i(n)&&e<n){return 1}if(n===t||n===null||i(e)&&i(n)&&n<e){return-1}var s="[object Object]",o=e.toString(),u=n.toString();if(o===s||u===s){throw new TypeError(r.UNCOMPARABLE_OBJECT)}return u.localeCompare(o)}};n.EqualityComparer={standard:function(e,t){return e===t},caseInsensitive:function(e,t){if(typeof e!=="string"||typeof t!=="string"){return e===t}else{return e.toLocaleUpperCase()===t.toLocaleUpperCase()}}};n.KeyValue=function(e,n){if(e===t||e===null){throw new Error(r.UNDEFINED_KEY)}if(n===t){throw new Error(r.UNDEFINED_VALUE)}this.key=e;this.value=n};n.KeyValue.prototype.toString=function(){return this.key.toString()+":"+(this.value!==null?this.value.toString():"")};n.Collection=function(){if(this===t){throw new TypeError(r.UNINITIALIZED_CLASS)}if(e.Collection&&this.constructor.name==="Collection"){throw new TypeError(r.ABSTRACT_COLLECTION_INIT)}this.__inner={};this.length=0};n.Collection.prototype.size=function(){return this.__inner.items.length};n.Collection.prototype.isEmpty=function(){return this.size()===0};n.Collection.prototype.forEach=function(e){if(this.isEmpty()||!s(e)){return}var t=this.toArray(),n;for(n=0;n<t.length;n++){e.call(t[n],n)}};n.Collection.prototype.find=function(e){if(this.isEmpty()||!s(e)){return t}var n=this.toArray(),r,i;for(r=0;r<n.length;r++){i=n[r];if(e.call(i)){return i}}return t};n.Collection.prototype.findAll=function(e){if(this.isEmpty()||!s(e)){return[]}var t=this.toArray(),n=[],r,i;for(r=0;r<t.length;r++){i=t[r];if(e.call(i)){n.push(i)}}return n};n.Collection.prototype.groupBy=function(e,i){var o=new n.Dictionary,u,a,f,l,c,h;if(typeof e==="string"&&e.length>0){u=function(){return this[e]}}else if(s(e)){u=e}else{throw new Error(r.INVALID_KEY_SELECTOR)}if(i&&typeof i==="string"){i=[i]}this.forEach(function(){a=u.call(this);if(a===t){a=null}f=o.get(a);if(!Array.isArray(i)||i.length===0){if(!f){f=[]}if(f.indexOf(this)<0){f.push(this)}}else{if(!f){f={}}for(h=0;h<i.length;h++){l=i[h];if(!l||typeof l!=="string"){continue}if(!f.hasOwnProperty(l)){f[l]=[]}if(this.hasOwnProperty(l)){c=this[l];if(c!==t&&f[l].indexOf(c)<0){f[l].push(c)}}}}o.put(a,f)});return o};n.Collection.prototype.all=function(e){return this.findAll(e).length===this.size()};n.Collection.prototype.any=function(e){return this.find(e)!==t};n.Collection.prototype.map=function(e){if(this.isEmpty()){return[]}var t=s(e),n=e&&typeof e==="string",r=this.toArray(),i=[],o,u;if(!t&&!n){return[]}for(u=0;u<r.length;u++){o=t?e.call(r[u]):r[u][e];i.push(o)}return i};n.Collection.prototype.reduce=function(e,n,r){if(this.isEmpty()||!s(e)){return t}var i=this.toArray(),o;if(r===true||n===true&&r===t){for(o=i.length-1;o>=0;o--){n=e.call(i[o],n)}}else{for(o=0;o<i.length;o++){n=e.call(i[o],n)}}return n};n.Collection.prototype.toArray=function(){return this.__inner.items.slice(0)};n.Collection.prototype.toSortedArray=function(e){var t=this.toArray();t.sort(e);return t};n.Collection.prototype.toJSON=function(){return JSON.stringify(this.toArray())};n.Collection.prototype.toString=function(){return this.toArray().join(",")};n.Collection.avg=function(e){var r=a(e);if(r.length===0){return t}return n.Collection.sum(r)/r.length};n.Collection.concat=function(){if(arguments.length===0){return t}var e=[],n=[],r;for(r=0;r<arguments.length;r++){n.push(a(arguments[r]))}return e.concat.apply(e,n)};n.Collection.distinct=function(e,t){var r=a(e);if(r.length===0){return[]}if(s(t)){return(new n.Set(t,r)).toArray()}return(new n.Set(r)).toArray()};n.Collection.equivalent=function(e,t,r){var i=a(e),o=a(t),u;if(i.length!==o.length){return false}if(!s(r)){r=n.EqualityComparer.standard}for(u=0;u<i.length;u++){if(!r(i[u],o[u])){return false}}return true};n.Collection.first=function(e){var n=a(e);if(n.length===0){return t}return n[0]};n.Collection.flatten=function(e,t){var r=a(e),i=[],s=true,o,u,f;if(r.length===0){return[]}for(f=0;f<r.length;f++){u=r[f];if(u instanceof n.Collection){r[f]=u.toArray()}}o=i.concat.apply(i,r);if(t){o.forEach(function(e){if(Array.isArray(e)||e instanceof n.Collection){s=false}});if(!s){o=n.Collection.flatten(o,true)}}return o};n.Collection.get=function(e,t){if(t!==parseInt(t,10)||t<0){throw new Error(r.INVALID_INDEX)}return a(e)[t]};n.Collection.last=function(e){var n=a(e);if(n.length===0){return t}return n[n.length-1]};n.Collection.min=function(e){var n=a(e);if(n.length===0){return t}return Math.min.apply(Math,n)};n.Collection.max=function(e){var n=a(e);if(n.length===0){return t}return Math.max.apply(Math,n)};n.Collection.range=function(e,t,n){return a(e).slice(t,n)};n.Collection.size=function(e){if(e!==t&&e!==null){if(Array.isArray(e)){return e.length}else if(e instanceof n.Collection){return e.size()}}throw new TypeError(r.INVALID_COLLECTION)};n.Collection.sum=function(e){var n=a(e);if(n.length===0){return t}return n.reduce(function(e,t){return e+t})/1};n.Collection.toArray=function(e){if(e===t){return t}if(Array.isArray(e)){return e.slice(0)}if(e instanceof n.Collection){return e.toArray()}return[e]};n.Collection.toSortedArray=function(e,r){if(e===t){return t}var i=n.Collection.toArray(e);i.sort(r);return i};n.Collection.zip=function(e,t,n){if(!s(n)){n=function(e,t){return[e,t]}}var r=a(e),i=a(t),o=[],u;for(u=0;u<r.length;u++){o.push(n(r[u],i.length>u?i[u]:null))}return o};n.Bag=function(){n.Collection.prototype.constructor.apply(this,arguments);var t=o(arguments),r;if(arguments.length>0&&s(t[0])){this.__inner.equalityComparer=t[0];t.splice(0,1);t=o(t)}else{this.__inner.equalityComparer=n.EqualityComparer.standard}this.__inner.items=[];this.__inner.counts=[];for(r=0;r<t.length;r++){this.add(t[r])}};n.Bag.prototype=new n.Collection;n.Bag.prototype.constructor=n.Bag;n.Bag.prototype.getEqualityComparer=function(){return this.__inner.equalityComparer};n.Bag.prototype.size=function(){var e=0,t=this.__inner.counts.length,n;for(n=0;n<t;n++){e+=this.__inner.counts[n]}return e};n.Bag.prototype.distinctSize=function(){return this.__inner.items.length};n.Bag.prototype.contains=function(e){return f(e,this.__inner.items,this.__inner.equalityComparer)>=0};n.Bag.prototype.count=function(e){if(e===t){throw new Error(r.UNDEFINED_ITEM)}var n=f(e,this.__inner.items,this.__inner.equalityComparer);if(n<0){return 0}return this.__inner.counts[n]};n.Bag.prototype.add=function(e,n){var i=f(e,this.__inner.items,this.__inner.equalityComparer);if(n===t){n=1}if(n!==parseInt(n,10)||n<1){throw new Error(r.INVALID_COUNT_VALUE)}if(i>=0){this.__inner.counts[i]+=n}else{this.__inner.items.push(e);this.__inner.counts.push(n)}this.length=this.size()};n.Bag.prototype.setCount=function(e,n){var i=f(e,this.__inner.items,this.__inner.equalityComparer);if(n===t||n===null||n!==parseInt(n,10)||n<1){throw new Error(r.INVALID_COUNT_VALUE)}if(i>=0){this.__inner.counts[i]=n}else{this.__inner.items.push(e);this.__inner.counts.push(n)}this.length=this.size()};n.Bag.prototype.remove=function(e){var t=f(e,this.__inner.items,this.__inner.equalityComparer);if(t<0){return false}this.__inner.items.splice(t,1);this.__inner.counts.splice(t,1);this.length=this.size();return true};n.Bag.prototype.toArray=function(){var e=[],t,n,r,i;for(r=0;r<this.__inner.items.length;r++){t=this.__inner.items[r];n=this.__inner.counts[r];for(i=0;i<n;i++){e.push(t)}}return e};n.Bag.prototype.toDistinctArray=function(){return this.__inner.items.slice(0)};n.Bag.prototype.toString=function(){var e="",t,n,r,i;for(r=0;r<this.__inner.items.length;r++){t=this.__inner.items[r];n=this.__inner.counts[r];for(i=0;i<n;i++){if(e.length>0){e+=","}e+=t}}return e};n.Bag.prototype.clear=function(){if(this.isEmpty()){return}delete this.__inner.items;delete this.__inner.counts;this.__inner.items=[];this.__inner.counts=[];this.length=0};n.Bag.parse=function(e){if(!Array.isArray(e)){throw new Error(r.INVALID_ITEM_ARRAY)}return new n.Bag(e)};n.Dictionary=function(){n.Collection.prototype.constructor.apply(this,arguments);var t=o(arguments),i=this,u,a;if(t.length>0&&s(t[0])){this.__inner.equalityComparer=t[0];t.splice(0,1);t=o(t)}else{this.__inner.equalityComparer=n.EqualityComparer.standard}this.__inner.keys=[];this.__inner.items=[];this.__inner.findIndex=function(e){return f(e,i.__inner.keys,i.__inner.equalityComparer)};for(a=0;a<t.length;a++){u=t[a];if(!u||!u.hasOwnProperty("key")||!u.hasOwnProperty("value")){throw new Error(r.INVALID_KEY_VALUE_COLLECTION)}this.add(u.key,u.value)}};n.Dictionary.prototype=new n.Collection;n.Dictionary.prototype.constructor=n.Dictionary;n.Dictionary.prototype.getEqualityComparer=function(){return this.__inner.equalityComparer};n.Dictionary.prototype.size=function(){return this.__inner.keys.length};n.Dictionary.prototype.containsKey=function(e){return this.__inner.findIndex(e)>=0};n.Dictionary.prototype.get=function(e){if(e===t||e===null){throw new Error(r.UNDEFINED_KEY)}var n=this.__inner.findIndex(e);if(n<0){return t}return this.__inner.items[n]};n.Dictionary.prototype.add=function(e,n){if(e===t||e===null){throw new Error(r.UNDEFINED_KEY)}if(n===t){throw new Error(r.UNDEFINED_VALUE)}if(this.__inner.findIndex(e)>=0){throw new Error(r.DUPLICATE_KEY)}this.__inner.keys.push(e);this.__inner.items.push(n);this.length=this.__inner.keys.length};n.Dictionary.prototype.put=function(e,n){if(e===t||e===null){throw new Error(r.UNDEFINED_KEY)}if(n===t){throw new Error(r.UNDEFINED_VALUE)}var i=this.__inner.findIndex(e);if(i>=0){this.__inner.items[i]=n;return}this.__inner.keys.push(e);this.__inner.items.push(n);this.length=this.__inner.keys.length};n.Dictionary.prototype.remove=function(e){if(e===t||e===null){throw new Error(r.UNDEFINED_KEY)}var n=this.__inner.findIndex(e);if(n<0){return false}this.__inner.keys.splice(n,1);this.__inner.items.splice(n,1);this.length=this.__inner.keys.length;return true};n.Dictionary.prototype.keys=function(){return this.__inner.keys.slice(0)};n.Dictionary.prototype.values=function(){var e=[],t,n;for(n=0;n<this.__inner.items.length;n++){t=this.__inner.items[n];if(e.indexOf(t)<0){e.push(t)}}return e};n.Dictionary.prototype.toArray=function(){var e=[],t;for(t=0;t<this.__inner.keys.length;t++){e.push(new n.KeyValue(this.__inner.keys[t],this.__inner.items[t]))}return e};n.Dictionary.prototype.toSortedArray=function(e){var t=[],r=this.keys(),i,s;r.sort(e);for(s=0;s<r.length;s++){i=r[s];t.push(new n.KeyValue(i,this.__inner.items[this.__inner.keys.indexOf(i)]))}return t};n.Dictionary.prototype.toObject=function(){var e={},t,n;for(n=0;n<this.__inner.keys.length;n++){t=this.__inner.keys[n].toString();if(t.toLocaleLowerCase()!=="constructor"&&t.toLocaleLowerCase()!=="prototype"){e[t]=this.__inner.items[n]}else{throw new Error(l(r.RESERVED_PROPERTY_NAME,t))}}return e};n.Dictionary.prototype.toString=function(){var e="",t,n,r;for(r=0;r<this.__inner.keys.length;r++){if(e.length>0){e+=","}t=this.__inner.keys[r];n=this.__inner.items[r];e+=t.toString()+":"+(n!==null?n.toString():"")}return e};n.Dictionary.prototype.clear=function(){if(this.isEmpty()){return}delete this.__inner.keys;delete this.__inner.items;this.__inner.keys=[];this.__inner.items=[];this.length=0};n.Dictionary.parse=function(e){if(!Array.isArray(e)){throw new Error(r.INVALID_ITEM_ARRAY)}return new n.Dictionary(e)};n.Hashtable=function(){n.Collection.prototype.constructor.apply(this,arguments);var u=o(arguments),a=this,f,l;if(u.length>0&&s(u[0])){this.__inner.hashCodeGenerator=u[0];u.splice(0,1);u=o(u)}else{this.__inner.hashCodeGenerator=function(e){if(e===t){return"$undefined"}if(e===null){return"$null"}if(typeof e==="string"){return e}if(i(e)){return"$"+e.toString()}return JSON.stringify(e)}}this.__inner.hash={};for(l=0;l<u.length;l++){f=u[l];if(!f||!f.hasOwnProperty("key")||!f.hasOwnProperty("value")){throw new Error(r.INVALID_KEY_VALUE_COLLECTION)}this.add(f.key,f.value)}};n.Hashtable.prototype=new n.Collection;n.Hashtable.prototype.constructor=n.Hashtable;n.Hashtable.prototype.size=function(){return Object.keys(this.__inner.hash).length};n.Hashtable.prototype.containsKey=function(e){var t=this.__inner.hashCodeGenerator(e),n=this.__inner.hash[t],r,i;if(Array.isArray(n)){for(i=0;i<n.length;i++){r=n[i];if(r.key===e){return true}}}return false};n.Hashtable.prototype.get=function(e){if(e===t||e===null){throw new Error(r.UNDEFINED_KEY)}var n=this.__inner.hashCodeGenerator(e),i=this.__inner.hash[n],s,o;if(Array.isArray(i)){for(o=0;o<i.length;o++){s=i[o];if(s.key===e){return s.value}}}return t};n.Hashtable.prototype.getHashCode=function(e){return this.__inner.hashCodeGenerator(e)};n.Hashtable.prototype.add=function(e,i){if(e===t||e===null){throw new Error(r.UNDEFINED_KEY)}if(i===t){throw new Error(r.UNDEFINED_VALUE)}var s=this.__inner.hashCodeGenerator(e),o=this.__inner.hash[s],u;if(Array.isArray(o)){for(u=0;u<o.length;u++){if(o[u].key===e){throw new Error(r.DUPLICATE_KEY)}}}else{o=[]}o.push(new n.KeyValue(e,i));this.__inner.hash[s]=o;this.length++};n.Hashtable.prototype.put=function(e,i){if(e===t||e===null){throw new Error(r.UNDEFINED_KEY)}if(i===t){throw new Error(r.UNDEFINED_VALUE)}var s=this.__inner.hashCodeGenerator(e),o=this.__inner.hash[s],u;if(Array.isArray(o)){for(u=0;u<o.length;u++){if(o[u].key===e){return}}}else{o=[]}o.push(new n.KeyValue(e,i));this.__inner.hash[s]=o;this.length++};n.Hashtable.prototype.remove=function(e){if(e===t||e===null){throw new Error(r.UNDEFINED_KEY)}var n=this.__inner.hashCodeGenerator(e),i=-1,s=this.__inner.hash[n],o;if(!Array.isArray(s)){return false}for(o=0;o<s.length;o++){if(s[o].key===e){i=o;break}}if(i>=0){s.splice(i,1);if(s.length===0){delete this.__inner.hash[n]}}this.length--;return true};n.Hashtable.prototype.clear=function(){this.__inner.hash={};this.length=0};n.Hashtable.prototype.keys=function(){var e=[],t=this.toArray(),n;for(n=0;n<t.length;n++){e.push(t[n].key)}return e};n.Hashtable.prototype.values=function(){var e=[],t=this.toArray(),n,r;for(r=0;r<t.length;r++){n=t[r].value;if(e.indexOf(n)<0){e.push(n)}}return e};n.Hashtable.prototype.toArray=function(){var e=[],t,r,i,s;for(i in this.__inner.hash){if(this.__inner.hash.hasOwnProperty(i)){t=this.__inner.hash[i];for(s=0;s<t.length;s++){r=t[s];e.push(new n.KeyValue(r.key,r.value))}}}return e};n.Hashtable.prototype.toSortedArray=function(e){var t=[],r=this.keys(),i,s;r.sort(e);for(s=0;s<r.length;s++){i=r[s];t.push(new n.KeyValue(i,this.get(i)))}return t};n.Hashtable.prototype.toObject=function(){var e={},t=this.toArray(),n,i;for(i=0;i<t.length;i++){n=t[i];if(n.key.toLocaleLowerCase()!=="constructor"&&n.key.toLocaleLowerCase()!=="prototype"){e[n.key]=n.value}else{throw new Error(l(r.RESERVED_PROPERTY_NAME,n.key))}}return e};n.Hashtable.prototype.toString=function(){var e="",t=this.toArray(),n,r;for(r=0;r<t.length;r++){n=t[r];if(e.length>0){e+=","}e+=n.key.toString()+":"+(n.value!==null?n.value.toString():"")}return e};n.Hashtable.parse=function(e){if(!Array.isArray(e)){throw new Error(r.INVALID_ITEM_ARRAY)}return new n.Hashtable(e)};n.LinkedList=function(){n.Collection.prototype.constructor.apply(this,arguments);this.head=null;this.tail=null;this.length=0;var t=o(arguments),r;for(r=0;r<t.length;r++){this.addLast(t[r])}};n.LinkedList.prototype=new n.Collection;n.LinkedList.prototype.constructor=n.LinkedList;n.LinkedList.Node=function(e){if(e===t){throw new Error(r.UNDEFINED_VALUE)}this.value=e;this.prev=null;this.next=null};n.LinkedList.prototype.size=function(){var e=0,t=this.head;while(t){e++;t=t.next}return e};n.LinkedList.prototype.contains=function(e){var t=this.head;while(t){if(t.value===e){return true}t=t.next}return false};n.LinkedList.prototype.findIndex=function(e){var t=0,n=this.head;while(n){if(n.value===e){return t}t++;n=n.next}return-1};n.LinkedList.prototype.findLastIndex=function(e){var t=this.length-1,n=t<=1?this.head:this.tail;while(n&&t>=0){if(n.value===e){return t}t--;n=n.prev}return-1};n.LinkedList.prototype.get=function(e){if(e!==parseInt(e,10)||e<0){throw new Error(r.INVALID_INDEX)}var n=0,i=this.head;while(i&&n<=e){if(n===e){return i.value}n++;i=i.next}return t};n.LinkedList.prototype.addFirst=function(e){if(e===t){throw new Error(r.UNDEFINED_ITEM)}var i=new n.LinkedList.Node(e),s;if(!this.head){this.head=i}else{s=this.head;this.head=i;this.head.next=s;s.prev=this.head;if(!this.tail){this.tail=s;this.tail.next=null}}this.length++};n.LinkedList.prototype.addLast=function(e){if(e===t){throw new Error(r.UNDEFINED_ITEM)}var i=new n.LinkedList.Node(e),s;if(!this.head){this.head=i}else if(!this.tail){this.tail=i;this.tail.prev=this.head;this.head.next=this.tail}else{s=this.tail;this.tail=i;this.tail.prev=s;s.next=this.tail}this.length++};n.LinkedList.prototype.removeFirst=function(){if(!this.head){return false}this.head=this.head.next;if(this.tail===this.head){this.tail=null}this.length--;return true};n.LinkedList.prototype.removeLast=function(){if(!this.head&&!this.tail){return false}if(!this.tail){this.head=null}else if(this.tail.prev&&this.tail.prev!==this.head){this.tail.prev.next=null;this.tail=this.tail.prev}else{this.head.next=null;this.tail=null}this.length--;return true};n.LinkedList.prototype.remove=function(e){if(e===t){throw new Error(r.UNDEFINED_ITEM)}if(!this.head){return false}var n=this.length,i=this.head;while(i){if(i.value===e){if(!i.prev){this.head=i.next;if(this.head){this.head.prev=null;if(this.head===this.tail){this.tail=null}}}else if(!i.next){this.tail=i.prev;if(this.tail){this.tail.next=null;if(this.head===this.tail){this.tail=null}}}else{i.next.prev=i.prev;i.prev.next=i.next}this.length--}i=i.next}return this.length<n};n.LinkedList.prototype.clear=function(){this.head=null;this.tail=null;this.length=0};n.LinkedList.prototype.toArray=function(){var e=[],t=this.head;while(t){e.push(t.value);t=t.next}return e};n.LinkedList.prototype.toReverseArray=function(){var e=[],t=this.tail||this.head;while(t){e.push(t.value);t=t.prev}return e};n.LinkedList.parse=function(e){if(!Array.isArray(e)){throw new Error(r.INVALID_ITEM_ARRAY)}return new n.LinkedList(e)};n.List=function(){n.Collection.prototype.constructor.apply(this,arguments);this.__inner.items=o(arguments);this.length=this.__inner.items.length};n.List.prototype=new n.Collection;n.List.prototype.constructor=n.List;n.List.prototype.findIndex=function(e){return this.__inner.items.indexOf(e)};n.List.prototype.findLastIndex=function(e){return this.__inner.items.lastIndexOf(e)};n.List.prototype.get=function(e){if(e!==parseInt(e,10)||e<0){throw new Error(r.INVALID_INDEX)}var n=this.size();if(n===0||e>n-1){return t}return this.__inner.items[e]};n.List.prototype.contains=function(e){return this.__inner.items.indexOf(e)>=0};n.List.prototype.add=function(e){this.__inner.items.push(e);this.length=this.__inner.items.length};n.List.prototype.addRange=function(){var e=o(arguments),t;for(t=0;t<e.length;t++){this.add(e[t])}};n.List.prototype.insert=function(e,t){this.__inner.items.splice(e,0,t);this.length=this.__inner.items.length};n.List.prototype.moveTo=function(e,t){if(!this.remove(t)){return false}this.__inner.items.splice(e,0,t);this.length++;return true};n.List.prototype.remove=function(e){var t=this.findIndex(e),n;if(t<0){return false}for(n=this.__inner.items.length-1;n>=0;n--){if(this.__inner.items[n]===e){this.__inner.items.splice(n,1)}}this.length=this.__inner.items.length;return true};n.List.prototype.removeAt=function(e){var t=this.__inner.items.length;this.__inner.items.splice(e,1);this.length=this.__inner.items.length;return t>this.length};n.List.prototype.removeWhere=function(e){if(this.isEmpty()||!s(e)){return false}var t=this.__inner.items.length,n;for(n=t-1;n>=0;n--){if(e.call(this.__inner.items[n],n)){this.__inner.items.splice(n,1)}}this.length=this.__inner.items.length;return t>this.length};n.List.prototype.reverse=function(){this.__inner.items.reverse();return this};n.List.prototype.clear=function(){if(this.isEmpty()){return}u(this)};n.List.parse=function(e){if(!Array.isArray(e)){throw new Error(r.INVALID_ITEM_ARRAY)}return new n.List(e)};n.Queue=function(){n.Collection.prototype.constructor.apply(this,arguments);this.__inner.items=o(arguments);this.length=this.__inner.items.length};n.Queue.prototype=new n.Collection;n.Queue.prototype.constructor=n.Queue;n.Queue.prototype.enqueue=function(e){this.__inner.items.push(e);this.length=this.__inner.items.length};n.Queue.prototype.dequeue=function(){if(this.isEmpty()){return t}var e=this.__inner.items.shift();this.length=this.__inner.items.length;return e};n.Queue.prototype.peek=function(){if(this.isEmpty()){return t}return this.__inner.items[0]};n.Queue.prototype.clear=function(){if(this.isEmpty()){return}u(this)};n.Queue.parse=function(e){if(!Array.isArray(e)){throw new Error(r.INVALID_ITEM_ARRAY)}return new n.Queue(e)};n.Set=function(){n.Collection.prototype.constructor.apply(this,arguments);var t=o(arguments),r;if(arguments.length>0&&s(t[0])){this.__inner.equalityComparer=t[0];t.splice(0,1);t=o(t)}else{this.__inner.equalityComparer=n.EqualityComparer.standard}this.__inner.items=[];for(r=0;r<t.length;r++){this.add(t[r])}};n.Set.prototype=new n.Collection;n.Set.prototype.constructor=n.Set;n.Set.prototype.getEqualityComparer=function(){return this.__inner.equalityComparer};n.Set.prototype.contains=function(e){return f(e,this.__inner.items,this.__inner.equalityComparer)>=0};n.Set.prototype.add=function(e){if(this.contains(e)){return false}this.__inner.items.push(e);this.length=this.__inner.items.length;return true};n.Set.prototype.addRange=function(){var e=o(arguments),t;for(t=0;t<e.length;t++){this.add(e[t])}};n.Set.prototype.remove=function(e){var t=f(e,this.__inner.items,this.__inner.equalityComparer);if(t<0){return false}this.__inner.items.splice(t,1);this.length=this.__inner.items.length;return true};n.Set.prototype.clear=function(){if(this.isEmpty()){return}u(this)};n.Set.prototype.union=function(e){var t=new n.Set(this.__inner.equalityComparer,this.__inner.items);t.addRange(e);return t};n.Set.prototype.intersection=function(e){var t=new n.Set(this.__inner.equalityComparer),r=o(arguments),i,s;for(s=0;s<r.length;s++){i=r[s];if(this.contains(i)){t.add(i)}}return t};n.Set.prototype.difference=function(e){var t=new n.Set(this.__inner.equalityComparer),r=o(arguments),i,s,u,a,f;for(a=0;a<this.__inner.items.length;a++){i=this.__inner.items[a];u=false;for(f=0;f<r.length;f++){s=r[f];if(this.__inner.equalityComparer(i,s)){u=true;break}}if(!u){t.add(i)}}return t};n.Set.prototype.equals=function(e){var t=o(arguments),n;if(t.length!==this.__inner.items.length){return false}for(n=0;n<this.__inner.items.length;n++){if(!this.__inner.equalityComparer(t[n],this.__inner.items[n])){return false}}return true};n.Set.prototype.isProperSubsetOf=function(e){var t=new n.Set(this.__inner.equalityComparer,o(arguments));return this.difference(t).length===0&&!this.equals(t)};n.Set.prototype.isProperSupersetOf=function(e){var t=new n.Set(this.__inner.equalityComparer,o(arguments));return t.difference(this).length===0&&!this.equals(t)};n.Set.prototype.isSubsetOf=function(e){var t=new n.Set(this.__inner.equalityComparer,o(arguments));return this.difference(t).length===0};n.Set.prototype.isSupersetOf=function(e){var t=new n.Set(this.__inner.equalityComparer,o(arguments));return t.difference(this).length===0};n.Set.parse=function(e){if(!Array.isArray(e)){throw new Error(r.INVALID_ITEM_ARRAY)}return new n.Set(e)};n.Stack=function(){n.Collection.prototype.constructor.apply(this,arguments);var t=o(arguments);t.reverse();this.__inner.items=t;this.length=this.__inner.items.length};n.Stack.prototype=new n.Collection;n.Stack.prototype.constructor=n.Stack;n.Stack.prototype.push=function(e){this.__inner.items.push(e);this.length=this.__inner.items.length};n.Stack.prototype.pop=function(){if(this.isEmpty()){return t}var e=this.__inner.items.pop();this.length=this.__inner.items.length;return e};n.Stack.prototype.peek=function(){var e=this.size();if(e===0){return t}return this.__inner.items[e-1]};n.Stack.prototype.clear=function(){if(this.isEmpty()){return}u(this)};n.Stack.prototype.toArray=function(){var e=this.__inner.items.slice(0);e.reverse();return e};n.Stack.parse=function(e){if(!Array.isArray(e)){throw new Error(r.INVALID_ITEM_ARRAY)}return new n.Stack(e)};n.Tree=function(){n.Collection.prototype.constructor.apply(this,arguments);var t=o(arguments),r;if(arguments.length>0&&s(t[0])){this.__inner.comparer=t[0];t.splice(0,1);t=o(t)}else{this.__inner.comparer=n.Comparer.standard}this.root=null;for(r=0;r<t.length;r++){this.add(t[r])}};n.Tree.prototype=new n.Collection;n.Tree.prototype.constructor=n.Tree;n.Tree.prototype.getComparer=function(){return this.__inner.comparer};n.Tree.Node=function(e){this.value=e;this.left=null;this.right=null;this.parent=null};n.Tree.prototype.isEmpty=function(){return!this.root};n.Tree.prototype.size=function(){var e=0;this.forEach(function(){e++});return e};n.Tree.prototype.min=function(){var e=this.root;if(!e){return t}while(e.left){e=e.left}return e.value};n.Tree.prototype.max=function(){var e=this.root;if(!e){return t}while(e.right){e=e.right}return e.value};n.Tree.prototype.forEach=function(e){if(this.isEmpty()||!s(e)){return}var t=function(e,n){if(e===null){return}t(e.left,n);n.call(e.value);t(e.right,n)};t(this.root,e)};n.Tree.prototype.contains=function(e){var t=this,n=false;this.forEach(function(){if(!n&&t.__inner.comparer(this,e)===0){n=true}});return n};n.Tree.prototype.add=function(e){if(e===t){throw new Error(r.UNDEFINED_ITEM)}var i=this,s=function(e){var t=null,n=i.root,r=null;while(n!==null){r=i.__inner.comparer(e.value,n.value);if(r===0){return null}else if(r<0){t=n;n=n.left}else{t=n;n=n.right}}e.parent=t;if(t===null){i.root=e}else if(i.__inner.comparer(e.value,t.value)<0){t.left=e}else{t.right=e}return e};if(s(new n.Tree.Node(e))===null){return false}this.length++;return true};n.Tree.prototype.addRange=function(){var e=o(arguments),t;for(t=0;t<e.length;t++){this.add(e[t])}};n.Tree.prototype.remove=function(e){if(e===t){throw new Error(r.UNDEFINED_ITEM)}var n=this,i=function(e,t){var r;while(e!==null&&r!==0){r=n.__inner.comparer(t,e.value);if(r<0){e=e.left}else if(r>0){e=e.right}}return e},s=i(this.root,e),o=function(e){var t=function(e,t){if(e.parent===null){n.root=t}else if(e===e.parent.left){e.parent.left=t}else{e.parent.right=t}if(t!==null){t.parent=e.parent}},r;if(e.left===null){t(e,e.right)}else if(e.right===null){t(e,e.left)}else{r=e.right;while(r.left!==null){r=r.left}if(r.parent!==e){t(r,r.right);r.right=e.right;r.right.parent=r}t(e,r);r.left=e.left;r.left.parent=r}return e};if(s===null){return false}o(s);this.length--;return true};n.Tree.prototype.clear=function(){this.root=null;this.length=0};n.Tree.prototype.toArray=function(){var e=[];this.forEach(function(){e.push(this)});return e};n.Tree.prototype.toSortedArray=function(e){var t=this.toArray();if(s(e)){t.sort(e)}return t};n.Tree.parse=function(e){if(!Array.isArray(e)){throw new Error(r.INVALID_ITEM_ARRAY)}return new n.Tree(e)};var c=function(){if(e.Collection instanceof n.Collection){return false}e.Bag=n.Bag;e.Collection=n.Collection;e.Comparer=n.Comparer;e.Dictionary=n.Dictionary;e.EqualityComparer=n.EqualityComparer;e.Hashtable=n.Hashtable;e.LinkedList=n.LinkedList;e.List=n.List;e.Queue=n.Queue;e.Set=n.Set;e.Stack=n.Stack;e.Tree=n.Tree;return true};return c()})(this);
/*!
 * jCollections JavaScript Library v1.0
 * Copyright 2014, Dmitry Starosta
 * Released under the MIT license
 */
(function(m,g){'use strict';var b={},p=function(a){return!Array.isArray(a)&&0<=a-parseFloat(a)+1},l=function(a){return!!a&&"[object Function]"===Object.prototype.toString.call(a)},h=function(a){return a&&0!==a.length?1===a.length?(a=a[0],Array.isArray(a)?a.slice(0):a instanceof b.Collection?a.toArray():[a]):Array.prototype.slice.call(a,0):[]},s=function(a){a&&(delete a.__inner.items,a.__inner.items=[],a.length=0)},k=function(a){if(a!==g&&null!==a){if(Array.isArray(a))return a.slice(0);if(a instanceof b.Collection)return a.toArray()}throw new TypeError("Invalid collection provided"); },q=function(a,c,d){var b=-1,f=c.length,g;for(g=0;g<f;g++)if(d(a,c[g])){b=g;break}return b},t=function(a){if(!a)return a;var c;for(c=1;c<arguments.length;c++)a=a.replace(/%s/,arguments[c]);return a};b.Comparer={standard:function(a,c){if(a===c)return 0;if(a===g||null===a||p(a)&&p(c)&&a<c)return-1;if(c===g||null===c||p(a)&&p(c)&&c<a)return 1;var b=a.toString(),e=c.toString();if("[object Object]"===b||"[object Object]"===e)throw new TypeError("Object(s) cannot be compared using a built-in comparer"); return b.localeCompare(e)},reverse:function(a,c){if(a===c)return 0;if(a===g||null===a||p(a)&&p(c)&&a<c)return 1;if(c===g||null===c||p(a)&&p(c)&&c<a)return-1;var b=a.toString(),e=c.toString();if("[object Object]"===b||"[object Object]"===e)throw new TypeError("Object(s) cannot be compared using a built-in comparer");return e.localeCompare(b)}};b.EqualityComparer={standard:function(a,c){return a===c},caseInsensitive:function(a,c){return"string"!==typeof a||"string"!==typeof c?a===c:a.toLocaleUpperCase()=== c.toLocaleUpperCase()}};b.KeyValue=function(a,c){if(a===g||null===a)throw Error("Key must be defined");if(c===g)throw Error("Value must be defined");this.key=a;this.value=c};b.KeyValue.prototype.toString=function(){return this.key.toString()+":"+(null!==this.value?this.value.toString():"")};b.Collection=function(){if(this===g)throw new TypeError('The keyword "this" is not defined. Did you forget the "new" operator?');if(m.Collection&&"Collection"===this.constructor.name)throw new TypeError('"Collection" is an abstract class that cannot be initialized directly'); this.__inner={};this.length=0};b.Collection.prototype.size=function(){return this.__inner.items.length};b.Collection.prototype.isEmpty=function(){return 0===this.size()};b.Collection.prototype.forEach=function(a){if(!this.isEmpty()&&l(a)){var c=this.toArray(),b;for(b=0;b<c.length;b++)a.call(c[b],b)}};b.Collection.prototype.find=function(a){if(this.isEmpty()||!l(a))return g;var c=this.toArray(),b,e;for(b=0;b<c.length;b++)if(e=c[b],a.call(e))return e;return g};b.Collection.prototype.findAll=function(a){if(this.isEmpty()|| !l(a))return[];var c=this.toArray(),b=[],e,f;for(e=0;e<c.length;e++)f=c[e],a.call(f)&&b.push(f);return b};b.Collection.prototype.groupBy=function(a,c){var d=new b.Dictionary,e,f,n,r,h,k;if("string"===typeof a&&0<a.length)e=function(){return this[a]};else if(l(a))e=a;else throw Error("Invalid key selector function provided");c&&"string"===typeof c&&(c=[c]);this.forEach(function(){f=e.call(this);f===g&&(f=null);n=d.get(f);if(Array.isArray(c)&&0!==c.length)for(n||(n={}),k=0;k<c.length;k++)(r=c[k])&& "string"===typeof r&&(n.hasOwnProperty(r)||(n[r]=[]),this.hasOwnProperty(r)&&(h=this[r],h!==g&&0>n[r].indexOf(h)&&n[r].push(h)));else n||(n=[]),0>n.indexOf(this)&&n.push(this);d.put(f,n)});return d};b.Collection.prototype.all=function(a){return this.findAll(a).length===this.size()};b.Collection.prototype.any=function(a){return this.find(a)!==g};b.Collection.prototype.map=function(a){if(this.isEmpty())return[];var c=l(a),b=a&&"string"===typeof a,e=this.toArray(),f=[],g;if(!c&&!b)return[];for(g=0;g< e.length;g++)b=c?a.call(e[g]):e[g][a],f.push(b);return f};b.Collection.prototype.reduce=function(a,c,b){if(this.isEmpty()||!l(a))return g;var e=this.toArray();if(!0===b||!0===c&&b===g)for(b=e.length-1;0<=b;b--)c=a.call(e[b],c);else for(b=0;b<e.length;b++)c=a.call(e[b],c);return c};b.Collection.prototype.toArray=function(){return this.__inner.items.slice(0)};b.Collection.prototype.toSortedArray=function(a){var c=this.toArray();c.sort(a);return c};b.Collection.prototype.toJSON=function(){return JSON.stringify(this.toArray())}; b.Collection.prototype.toString=function(){return this.toArray().join(",")};b.Collection.avg=function(a){a=k(a);return 0===a.length?g:b.Collection.sum(a)/a.length};b.Collection.concat=function(){if(0===arguments.length)return g;var a=[],c=[],b;for(b=0;b<arguments.length;b++)c.push(k(arguments[b]));return a.concat.apply(a,c)};b.Collection.distinct=function(a,c){var d=k(a);return 0===d.length?[]:l(c)?(new b.Set(c,d)).toArray():(new b.Set(d)).toArray()};b.Collection.equivalent=function(a,c,d){a=k(a); c=k(c);var e;if(a.length!==c.length)return!1;l(d)||(d=b.EqualityComparer.standard);for(e=0;e<a.length;e++)if(!d(a[e],c[e]))return!1;return!0};b.Collection.first=function(a){a=k(a);return 0===a.length?g:a[0]};b.Collection.flatten=function(a,c){var d=k(a),e=[],f=!0,g,h;if(0===d.length)return[];for(h=0;h<d.length;h++)g=d[h],g instanceof b.Collection&&(d[h]=g.toArray());d=e.concat.apply(e,d);c&&(d.forEach(function(a){if(Array.isArray(a)||a instanceof b.Collection)f=!1}),f||(d=b.Collection.flatten(d,!0))); return d};b.Collection.get=function(a,c){if(c!==parseInt(c,10)||0>c)throw Error("Index must be a non-negative integer");return k(a)[c]};b.Collection.last=function(a){a=k(a);return 0===a.length?g:a[a.length-1]};b.Collection.min=function(a){a=k(a);return 0===a.length?g:Math.min.apply(Math,a)};b.Collection.max=function(a){a=k(a);return 0===a.length?g:Math.max.apply(Math,a)};b.Collection.range=function(a,c,b){return k(a).slice(c,b)};b.Collection.size=function(a){if(a!==g&&null!==a){if(Array.isArray(a))return a.length; if(a instanceof b.Collection)return a.size()}throw new TypeError("Invalid collection provided");};b.Collection.sum=function(a){a=k(a);return 0===a.length?g:a.reduce(function(a,b){return a+b})/1};b.Collection.toArray=function(a){return a===g?g:Array.isArray(a)?a.slice(0):a instanceof b.Collection?a.toArray():[a]};b.Collection.toSortedArray=function(a,c){if(a===g)return g;var d=b.Collection.toArray(a);d.sort(c);return d};b.Collection.zip=function(a,c,b){l(b)||(b=function(a,c){return[a,c]});a=k(a);c= k(c);var e=[],f;for(f=0;f<a.length;f++)e.push(b(a[f],c.length>f?c[f]:null));return e};b.Bag=function(){b.Collection.prototype.constructor.apply(this,arguments);var a=h(arguments),c;0<arguments.length&&l(a[0])?(this.__inner.equalityComparer=a[0],a.splice(0,1),a=h(a)):this.__inner.equalityComparer=b.EqualityComparer.standard;this.__inner.items=[];this.__inner.counts=[];for(c=0;c<a.length;c++)this.add(a[c])};b.Bag.prototype=new b.Collection;b.Bag.prototype.constructor=b.Bag;b.Bag.prototype.getEqualityComparer= function(){return this.__inner.equalityComparer};b.Bag.prototype.size=function(){var a=0,c=this.__inner.counts.length,b;for(b=0;b<c;b++)a+=this.__inner.counts[b];return a};b.Bag.prototype.distinctSize=function(){return this.__inner.items.length};b.Bag.prototype.contains=function(a){return 0<=q(a,this.__inner.items,this.__inner.equalityComparer)};b.Bag.prototype.count=function(a){if(a===g)throw Error("Item must be defined");a=q(a,this.__inner.items,this.__inner.equalityComparer);return 0>a?0:this.__inner.counts[a]}; b.Bag.prototype.add=function(a,c){var b=q(a,this.__inner.items,this.__inner.equalityComparer);c===g&&(c=1);if(c!==parseInt(c,10)||1>c)throw Error("Count must be a positive integer");0<=b?this.__inner.counts[b]+=c:(this.__inner.items.push(a),this.__inner.counts.push(c));this.length=this.size()};b.Bag.prototype.setCount=function(a,c){var b=q(a,this.__inner.items,this.__inner.equalityComparer);if(c===g||null===c||c!==parseInt(c,10)||1>c)throw Error("Count must be a positive integer");0<=b?this.__inner.counts[b]= c:(this.__inner.items.push(a),this.__inner.counts.push(c));this.length=this.size()};b.Bag.prototype.remove=function(a){a=q(a,this.__inner.items,this.__inner.equalityComparer);if(0>a)return!1;this.__inner.items.splice(a,1);this.__inner.counts.splice(a,1);this.length=this.size();return!0};b.Bag.prototype.toArray=function(){var a=[],c,b,e,f;for(e=0;e<this.__inner.items.length;e++)for(c=this.__inner.items[e],b=this.__inner.counts[e],f=0;f<b;f++)a.push(c);return a};b.Bag.prototype.toDistinctArray=function(){return this.__inner.items.slice(0)}; b.Bag.prototype.toString=function(){var a="",c,b,e,f;for(e=0;e<this.__inner.items.length;e++)for(c=this.__inner.items[e],b=this.__inner.counts[e],f=0;f<b;f++)0<a.length&&(a+=","),a+=c;return a};b.Bag.prototype.clear=function(){this.isEmpty()||(delete this.__inner.items,delete this.__inner.counts,this.__inner.items=[],this.__inner.counts=[],this.length=0)};b.Bag.parse=function(a){if(!Array.isArray(a))throw Error("Invalid array of items provided");return new b.Bag(a)};b.Dictionary=function(){b.Collection.prototype.constructor.apply(this, arguments);var a=h(arguments),c=this,d,e;0<a.length&&l(a[0])?(this.__inner.equalityComparer=a[0],a.splice(0,1),a=h(a)):this.__inner.equalityComparer=b.EqualityComparer.standard;this.__inner.keys=[];this.__inner.items=[];this.__inner.findIndex=function(a){return q(a,c.__inner.keys,c.__inner.equalityComparer)};for(e=0;e<a.length;e++){d=a[e];if(!d||!d.hasOwnProperty("key")||!d.hasOwnProperty("value"))throw Error("The initial item collection can only contain key/value objects");this.add(d.key,d.value)}}; b.Dictionary.prototype=new b.Collection;b.Dictionary.prototype.constructor=b.Dictionary;b.Dictionary.prototype.getEqualityComparer=function(){return this.__inner.equalityComparer};b.Dictionary.prototype.size=function(){return this.__inner.keys.length};b.Dictionary.prototype.containsKey=function(a){return 0<=this.__inner.findIndex(a)};b.Dictionary.prototype.get=function(a){if(a===g||null===a)throw Error("Key must be defined");a=this.__inner.findIndex(a);return 0>a?g:this.__inner.items[a]};b.Dictionary.prototype.add= function(a,c){if(a===g||null===a)throw Error("Key must be defined");if(c===g)throw Error("Value must be defined");if(0<=this.__inner.findIndex(a))throw Error("Value with the same key already exists");this.__inner.keys.push(a);this.__inner.items.push(c);this.length=this.__inner.keys.length};b.Dictionary.prototype.put=function(a,c){if(a===g||null===a)throw Error("Key must be defined");if(c===g)throw Error("Value must be defined");var b=this.__inner.findIndex(a);0<=b?this.__inner.items[b]=c:(this.__inner.keys.push(a), this.__inner.items.push(c),this.length=this.__inner.keys.length)};b.Dictionary.prototype.remove=function(a){if(a===g||null===a)throw Error("Key must be defined");a=this.__inner.findIndex(a);if(0>a)return!1;this.__inner.keys.splice(a,1);this.__inner.items.splice(a,1);this.length=this.__inner.keys.length;return!0};b.Dictionary.prototype.keys=function(){return this.__inner.keys.slice(0)};b.Dictionary.prototype.values=function(){var a=[],c,b;for(b=0;b<this.__inner.items.length;b++)c=this.__inner.items[b], 0>a.indexOf(c)&&a.push(c);return a};b.Dictionary.prototype.toArray=function(){var a=[],c;for(c=0;c<this.__inner.keys.length;c++)a.push(new b.KeyValue(this.__inner.keys[c],this.__inner.items[c]));return a};b.Dictionary.prototype.toSortedArray=function(a){var c=[],d=this.keys(),e;d.sort(a);for(e=0;e<d.length;e++)a=d[e],c.push(new b.KeyValue(a,this.__inner.items[this.__inner.keys.indexOf(a)]));return c};b.Dictionary.prototype.toObject=function(){var a={},b,d;for(d=0;d<this.__inner.keys.length;d++)if(b= this.__inner.keys[d].toString(),"constructor"!==b.toLocaleLowerCase()&&"prototype"!==b.toLocaleLowerCase())a[b]=this.__inner.items[d];else throw Error(t('Reserved property name "%s"',b));return a};b.Dictionary.prototype.toString=function(){var a="",b,d,e;for(e=0;e<this.__inner.keys.length;e++)0<a.length&&(a+=","),b=this.__inner.keys[e],d=this.__inner.items[e],a+=b.toString()+":"+(null!==d?d.toString():"");return a};b.Dictionary.prototype.clear=function(){this.isEmpty()||(delete this.__inner.keys, delete this.__inner.items,this.__inner.keys=[],this.__inner.items=[],this.length=0)};b.Dictionary.parse=function(a){if(!Array.isArray(a))throw Error("Invalid array of items provided");return new b.Dictionary(a)};b.Hashtable=function(){b.Collection.prototype.constructor.apply(this,arguments);var a=h(arguments),c,d;0<a.length&&l(a[0])?(this.__inner.hashCodeGenerator=a[0],a.splice(0,1),a=h(a)):this.__inner.hashCodeGenerator=function(a){return a===g?"$undefined":null===a?"$null":"string"===typeof a?a: p(a)?"$"+a.toString():JSON.stringify(a)};this.__inner.hash={};for(d=0;d<a.length;d++){c=a[d];if(!c||!c.hasOwnProperty("key")||!c.hasOwnProperty("value"))throw Error("The initial item collection can only contain key/value objects");this.add(c.key,c.value)}};b.Hashtable.prototype=new b.Collection;b.Hashtable.prototype.constructor=b.Hashtable;b.Hashtable.prototype.size=function(){return Object.keys(this.__inner.hash).length};b.Hashtable.prototype.containsKey=function(a){var b=this.__inner.hashCodeGenerator(a), b=this.__inner.hash[b],d,e;if(Array.isArray(b))for(e=0;e<b.length;e++)if(d=b[e],d.key===a)return!0;return!1};b.Hashtable.prototype.get=function(a){if(a===g||null===a)throw Error("Key must be defined");var b=this.__inner.hashCodeGenerator(a),b=this.__inner.hash[b],d,e;if(Array.isArray(b))for(e=0;e<b.length;e++)if(d=b[e],d.key===a)return d.value;return g};b.Hashtable.prototype.getHashCode=function(a){return this.__inner.hashCodeGenerator(a)};b.Hashtable.prototype.add=function(a,c){if(a===g||null=== a)throw Error("Key must be defined");if(c===g)throw Error("Value must be defined");var d=this.__inner.hashCodeGenerator(a),e=this.__inner.hash[d],f;if(Array.isArray(e))for(f=0;f<e.length;f++){if(e[f].key===a)throw Error("Value with the same key already exists");}else e=[];e.push(new b.KeyValue(a,c));this.__inner.hash[d]=e;this.length++};b.Hashtable.prototype.put=function(a,c){if(a===g||null===a)throw Error("Key must be defined");if(c===g)throw Error("Value must be defined");var d=this.__inner.hashCodeGenerator(a), e=this.__inner.hash[d],f;if(Array.isArray(e))for(f=0;f<e.length;f++){if(e[f].key===a)return}else e=[];e.push(new b.KeyValue(a,c));this.__inner.hash[d]=e;this.length++};b.Hashtable.prototype.remove=function(a){if(a===g||null===a)throw Error("Key must be defined");var b=this.__inner.hashCodeGenerator(a),d=-1,e=this.__inner.hash[b],f;if(!Array.isArray(e))return!1;for(f=0;f<e.length;f++)if(e[f].key===a){d=f;break}0<=d&&(e.splice(d,1),0===e.length&&delete this.__inner.hash[b]);this.length--;return!0}; b.Hashtable.prototype.clear=function(){this.__inner.hash={};this.length=0};b.Hashtable.prototype.keys=function(){var a=[],b=this.toArray(),d;for(d=0;d<b.length;d++)a.push(b[d].key);return a};b.Hashtable.prototype.values=function(){var a=[],b=this.toArray(),d,e;for(e=0;e<b.length;e++)d=b[e].value,0>a.indexOf(d)&&a.push(d);return a};b.Hashtable.prototype.toArray=function(){var a=[],c,d,e,f;for(e in this.__inner.hash)if(this.__inner.hash.hasOwnProperty(e))for(c=this.__inner.hash[e],f=0;f<c.length;f++)d= c[f],a.push(new b.KeyValue(d.key,d.value));return a};b.Hashtable.prototype.toSortedArray=function(a){var c=[],d=this.keys(),e;d.sort(a);for(e=0;e<d.length;e++)a=d[e],c.push(new b.KeyValue(a,this.get(a)));return c};b.Hashtable.prototype.toObject=function(){var a={},b=this.toArray(),d,e;for(e=0;e<b.length;e++)if(d=b[e],"constructor"!==d.key.toLocaleLowerCase()&&"prototype"!==d.key.toLocaleLowerCase())a[d.key]=d.value;else throw Error(t('Reserved property name "%s"',d.key));return a};b.Hashtable.prototype.toString= function(){var a="",b=this.toArray(),d,e;for(e=0;e<b.length;e++)d=b[e],0<a.length&&(a+=","),a+=d.key.toString()+":"+(null!==d.value?d.value.toString():"");return a};b.Hashtable.parse=function(a){if(!Array.isArray(a))throw Error("Invalid array of items provided");return new b.Hashtable(a)};b.LinkedList=function(){b.Collection.prototype.constructor.apply(this,arguments);this.tail=this.head=null;this.length=0;var a=h(arguments),c;for(c=0;c<a.length;c++)this.addLast(a[c])};b.LinkedList.prototype=new b.Collection; b.LinkedList.prototype.constructor=b.LinkedList;b.LinkedList.Node=function(a){if(a===g)throw Error("Value must be defined");this.value=a;this.next=this.prev=null};b.LinkedList.prototype.size=function(){for(var a=0,b=this.head;b;)a++,b=b.next;return a};b.LinkedList.prototype.contains=function(a){for(var b=this.head;b;){if(b.value===a)return!0;b=b.next}return!1};b.LinkedList.prototype.findIndex=function(a){for(var b=0,d=this.head;d;){if(d.value===a)return b;b++;d=d.next}return-1};b.LinkedList.prototype.findLastIndex= function(a){for(var b=this.length-1,d=1>=b?this.head:this.tail;d&&0<=b;){if(d.value===a)return b;b--;d=d.prev}return-1};b.LinkedList.prototype.get=function(a){if(a!==parseInt(a,10)||0>a)throw Error("Index must be a non-negative integer");for(var b=0,d=this.head;d&&b<=a;){if(b===a)return d.value;b++;d=d.next}return g};b.LinkedList.prototype.addFirst=function(a){if(a===g)throw Error("Item must be defined");a=new b.LinkedList.Node(a);var c;this.head?(c=this.head,this.head=a,this.head.next=c,c.prev=this.head, this.tail||(this.tail=c,this.tail.next=null)):this.head=a;this.length++};b.LinkedList.prototype.addLast=function(a){if(a===g)throw Error("Item must be defined");a=new b.LinkedList.Node(a);var c;this.head?this.tail?(c=this.tail,this.tail=a,this.tail.prev=c,c.next=this.tail):(this.tail=a,this.tail.prev=this.head,this.head.next=this.tail):this.head=a;this.length++};b.LinkedList.prototype.removeFirst=function(){if(!this.head)return!1;this.head=this.head.next;this.tail===this.head&&(this.tail=null);this.length--; return!0};b.LinkedList.prototype.removeLast=function(){if(!this.head&&!this.tail)return!1;this.tail?this.tail.prev&&this.tail.prev!==this.head?(this.tail.prev.next=null,this.tail=this.tail.prev):this.tail=this.head.next=null:this.head=null;this.length--;return!0};b.LinkedList.prototype.remove=function(a){if(a===g)throw Error("Item must be defined");if(!this.head)return!1;for(var b=this.length,d=this.head;d;){if(d.value===a){if(d.prev)if(d.next)d.next.prev=d.prev,d.prev.next=d.next;else{if(this.tail= d.prev)this.tail.next=null,this.head===this.tail&&(this.tail=null)}else if(this.head=d.next)this.head.prev=null,this.head===this.tail&&(this.tail=null);this.length--}d=d.next}return this.length<b};b.LinkedList.prototype.clear=function(){this.tail=this.head=null;this.length=0};b.LinkedList.prototype.toArray=function(){for(var a=[],b=this.head;b;)a.push(b.value),b=b.next;return a};b.LinkedList.prototype.toReverseArray=function(){for(var a=[],b=this.tail||this.head;b;)a.push(b.value),b=b.prev;return a}; b.LinkedList.parse=function(a){if(!Array.isArray(a))throw Error("Invalid array of items provided");return new b.LinkedList(a)};b.List=function(){b.Collection.prototype.constructor.apply(this,arguments);this.__inner.items=h(arguments);this.length=this.__inner.items.length};b.List.prototype=new b.Collection;b.List.prototype.constructor=b.List;b.List.prototype.findIndex=function(a){return this.__inner.items.indexOf(a)};b.List.prototype.findLastIndex=function(a){return this.__inner.items.lastIndexOf(a)}; b.List.prototype.get=function(a){if(a!==parseInt(a,10)||0>a)throw Error("Index must be a non-negative integer");var b=this.size();return 0===b||a>b-1?g:this.__inner.items[a]};b.List.prototype.contains=function(a){return 0<=this.__inner.items.indexOf(a)};b.List.prototype.add=function(a){this.__inner.items.push(a);this.length=this.__inner.items.length};b.List.prototype.addRange=function(){var a=h(arguments),b;for(b=0;b<a.length;b++)this.add(a[b])};b.List.prototype.insert=function(a,b){this.__inner.items.splice(a, 0,b);this.length=this.__inner.items.length};b.List.prototype.moveTo=function(a,b){if(!this.remove(b))return!1;this.__inner.items.splice(a,0,b);this.length++;return!0};b.List.prototype.remove=function(a){var b;if(0>this.findIndex(a))return!1;for(b=this.__inner.items.length-1;0<=b;b--)this.__inner.items[b]===a&&this.__inner.items.splice(b,1);this.length=this.__inner.items.length;return!0};b.List.prototype.removeAt=function(a){var b=this.__inner.items.length;this.__inner.items.splice(a,1);this.length= this.__inner.items.length;return b>this.length};b.List.prototype.removeWhere=function(a){if(this.isEmpty()||!l(a))return!1;var b=this.__inner.items.length,d;for(d=b-1;0<=d;d--)a.call(this.__inner.items[d],d)&&this.__inner.items.splice(d,1);this.length=this.__inner.items.length;return b>this.length};b.List.prototype.reverse=function(){this.__inner.items.reverse();return this};b.List.prototype.clear=function(){this.isEmpty()||s(this)};b.List.parse=function(a){if(!Array.isArray(a))throw Error("Invalid array of items provided"); return new b.List(a)};b.Queue=function(){b.Collection.prototype.constructor.apply(this,arguments);this.__inner.items=h(arguments);this.length=this.__inner.items.length};b.Queue.prototype=new b.Collection;b.Queue.prototype.constructor=b.Queue;b.Queue.prototype.enqueue=function(a){this.__inner.items.push(a);this.length=this.__inner.items.length};b.Queue.prototype.dequeue=function(){if(this.isEmpty())return g;var a=this.__inner.items.shift();this.length=this.__inner.items.length;return a};b.Queue.prototype.peek= function(){return this.isEmpty()?g:this.__inner.items[0]};b.Queue.prototype.clear=function(){this.isEmpty()||s(this)};b.Queue.parse=function(a){if(!Array.isArray(a))throw Error("Invalid array of items provided");return new b.Queue(a)};b.Set=function(){b.Collection.prototype.constructor.apply(this,arguments);var a=h(arguments),c;0<arguments.length&&l(a[0])?(this.__inner.equalityComparer=a[0],a.splice(0,1),a=h(a)):this.__inner.equalityComparer=b.EqualityComparer.standard;this.__inner.items=[];for(c= 0;c<a.length;c++)this.add(a[c])};b.Set.prototype=new b.Collection;b.Set.prototype.constructor=b.Set;b.Set.prototype.getEqualityComparer=function(){return this.__inner.equalityComparer};b.Set.prototype.contains=function(a){return 0<=q(a,this.__inner.items,this.__inner.equalityComparer)};b.Set.prototype.add=function(a){if(this.contains(a))return!1;this.__inner.items.push(a);this.length=this.__inner.items.length;return!0};b.Set.prototype.addRange=function(){var a=h(arguments),b;for(b=0;b<a.length;b++)this.add(a[b])}; b.Set.prototype.remove=function(a){a=q(a,this.__inner.items,this.__inner.equalityComparer);if(0>a)return!1;this.__inner.items.splice(a,1);this.length=this.__inner.items.length;return!0};b.Set.prototype.clear=function(){this.isEmpty()||s(this)};b.Set.prototype.union=function(a){var c=new b.Set(this.__inner.equalityComparer,this.__inner.items);c.addRange(a);return c};b.Set.prototype.intersection=function(a){var c=new b.Set(this.__inner.equalityComparer),d=h(arguments),e,f;for(f=0;f<d.length;f++)e=d[f], this.contains(e)&&c.add(e);return c};b.Set.prototype.difference=function(a){var c=new b.Set(this.__inner.equalityComparer),d=h(arguments),e,f,g,k,l;for(k=0;k<this.__inner.items.length;k++){e=this.__inner.items[k];g=!1;for(l=0;l<d.length;l++)if(f=d[l],this.__inner.equalityComparer(e,f)){g=!0;break}g||c.add(e)}return c};b.Set.prototype.equals=function(a){var b=h(arguments),d;if(b.length!==this.__inner.items.length)return!1;for(d=0;d<this.__inner.items.length;d++)if(!this.__inner.equalityComparer(b[d], this.__inner.items[d]))return!1;return!0};b.Set.prototype.isProperSubsetOf=function(a){var c=new b.Set(this.__inner.equalityComparer,h(arguments));return 0===this.difference(c).length&&!this.equals(c)};b.Set.prototype.isProperSupersetOf=function(a){var c=new b.Set(this.__inner.equalityComparer,h(arguments));return 0===c.difference(this).length&&!this.equals(c)};b.Set.prototype.isSubsetOf=function(a){var c=new b.Set(this.__inner.equalityComparer,h(arguments));return 0===this.difference(c).length}; b.Set.prototype.isSupersetOf=function(a){return 0===(new b.Set(this.__inner.equalityComparer,h(arguments))).difference(this).length};b.Set.parse=function(a){if(!Array.isArray(a))throw Error("Invalid array of items provided");return new b.Set(a)};b.Stack=function(){b.Collection.prototype.constructor.apply(this,arguments);var a=h(arguments);a.reverse();this.__inner.items=a;this.length=this.__inner.items.length};b.Stack.prototype=new b.Collection;b.Stack.prototype.constructor=b.Stack;b.Stack.prototype.push= function(a){this.__inner.items.push(a);this.length=this.__inner.items.length};b.Stack.prototype.pop=function(){if(this.isEmpty())return g;var a=this.__inner.items.pop();this.length=this.__inner.items.length;return a};b.Stack.prototype.peek=function(){var a=this.size();return 0===a?g:this.__inner.items[a-1]};b.Stack.prototype.clear=function(){this.isEmpty()||s(this)};b.Stack.prototype.toArray=function(){var a=this.__inner.items.slice(0);a.reverse();return a};b.Stack.parse=function(a){if(!Array.isArray(a))throw Error("Invalid array of items provided"); return new b.Stack(a)};b.Tree=function(){b.Collection.prototype.constructor.apply(this,arguments);var a=h(arguments),c;0<arguments.length&&l(a[0])?(this.__inner.comparer=a[0],a.splice(0,1),a=h(a)):this.__inner.comparer=b.Comparer.standard;this.root=null;for(c=0;c<a.length;c++)this.add(a[c])};b.Tree.prototype=new b.Collection;b.Tree.prototype.constructor=b.Tree;b.Tree.prototype.getComparer=function(){return this.__inner.comparer};b.Tree.Node=function(a){this.value=a;this.parent=this.right=this.left= null};b.Tree.prototype.isEmpty=function(){return!this.root};b.Tree.prototype.size=function(){var a=0;this.forEach(function(){a++});return a};b.Tree.prototype.min=function(){var a=this.root;if(!a)return g;for(;a.left;)a=a.left;return a.value};b.Tree.prototype.max=function(){var a=this.root;if(!a)return g;for(;a.right;)a=a.right;return a.value};b.Tree.prototype.forEach=function(a){if(!this.isEmpty()&&l(a)){var b=function(a,e){null!==a&&(b(a.left,e),e.call(a.value),b(a.right,e))};b(this.root,a)}};b.Tree.prototype.contains= function(a){var b=this,d=!1;this.forEach(function(){d||0!==b.__inner.comparer(this,a)||(d=!0)});return d};b.Tree.prototype.add=function(a){if(a===g)throw Error("Item must be defined");a:{a=new b.Tree.Node(a);for(var c=null,d=this.root,e=null;null!==d;)if(e=this.__inner.comparer(a.value,d.value),0===e){a=null;break a}else 0>e?(c=d,d=d.left):(c=d,d=d.right);a.parent=c;null===c?this.root=a:0>this.__inner.comparer(a.value,c.value)?c.left=a:c.right=a}if(null===a)return!1;this.length++;return!0};b.Tree.prototype.addRange= function(){var a=h(arguments),b;for(b=0;b<a.length;b++)this.add(a[b])};b.Tree.prototype.remove=function(a){if(a===g)throw Error("Item must be defined");var b=this;a=function(a,e){for(var f;null!==a&&0!==f;)f=b.__inner.comparer(e,a.value),0>f?a=a.left:0<f&&(a=a.right);return a}(this.root,a);if(null===a)return!1;(function(a){var e=function(a,d){null===a.parent?b.root=d:a===a.parent.left?a.parent.left=d:a.parent.right=d;null!==d&&(d.parent=a.parent)},f;if(null===a.left)e(a,a.right);else if(null===a.right)e(a, a.left);else{for(f=a.right;null!==f.left;)f=f.left;f.parent!==a&&(e(f,f.right),f.right=a.right,f.right.parent=f);e(a,f);f.left=a.left;f.left.parent=f}return a})(a);this.length--;return!0};b.Tree.prototype.clear=function(){this.root=null;this.length=0};b.Tree.prototype.toArray=function(){var a=[];this.forEach(function(){a.push(this)});return a};b.Tree.prototype.toSortedArray=function(a){var b=this.toArray();l(a)&&b.sort(a);return b};b.Tree.parse=function(a){if(!Array.isArray(a))throw Error("Invalid array of items provided"); return new b.Tree(a)};m.Collection instanceof b.Collection||(m.Bag=b.Bag,m.Collection=b.Collection,m.Comparer=b.Comparer,m.Dictionary=b.Dictionary,m.EqualityComparer=b.EqualityComparer,m.Hashtable=b.Hashtable,m.LinkedList=b.LinkedList,m.List=b.List,m.Queue=b.Queue,m.Set=b.Set,m.Stack=b.Stack,m.Tree=b.Tree)})(window);